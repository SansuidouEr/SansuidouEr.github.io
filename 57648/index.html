<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>指定贴图路径汉化版 | SansuidouEr Blog</title><meta name="author" content="三岁豆Er"><meta name="copyright" content="三岁豆Er"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="指定贴图路径汉化版脚本名称：FileTextureManager 脚本语言：MEL 脚本来源：劲爆羊工具盒子 汉化说明：这个Maya指贴图工具其实功能非常强大，我是从劲暴羊工具盒知道的这个脚本，为了使用这个工具更方便，所以汉化了这个脚本；在一段时间的使用后，没发现有问题。分享给有需要的人。如果使用发现有什么问题，请使用未汉化原版本； 汉化界面 汉化版源码：12345678910111213141">
<meta property="og:type" content="article">
<meta property="og:title" content="指定贴图路径汉化版">
<meta property="og:url" content="https://sansuidouer.github.io/57648/">
<meta property="og:site_name" content="SansuidouEr Blog">
<meta property="og:description" content="指定贴图路径汉化版脚本名称：FileTextureManager 脚本语言：MEL 脚本来源：劲爆羊工具盒子 汉化说明：这个Maya指贴图工具其实功能非常强大，我是从劲暴羊工具盒知道的这个脚本，为了使用这个工具更方便，所以汉化了这个脚本；在一段时间的使用后，没发现有问题。分享给有需要的人。如果使用发现有什么问题，请使用未汉化原版本； 汉化界面 汉化版源码：12345678910111213141">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png">
<meta property="article:published_time" content="2023-06-26T15:13:59.000Z">
<meta property="article:modified_time" content="2025-01-01T10:41:28.016Z">
<meta property="article:author" content="三岁豆Er">
<meta property="article:tag" content="Mel">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "指定贴图路径汉化版",
  "url": "https://sansuidouer.github.io/57648/",
  "image": "https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png",
  "datePublished": "2023-06-26T15:13:59.000Z",
  "dateModified": "2025-01-01T10:41:28.016Z",
  "author": [
    {
      "@type": "Person",
      "name": "三岁豆Er",
      "url": "https://sansuidouer.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/favicon_v1.svg"><link rel="canonical" href="https://sansuidouer.github.io/57648/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '指定贴图路径汉化版',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="SansuidouEr Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/L_v02.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/Links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">SansuidouEr Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">指定贴图路径汉化版</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/Links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">指定贴图路径汉化版</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-26T15:13:59.000Z" title="发表于 2023-06-26 23:13:59">2023-06-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-01T10:41:28.016Z" title="更新于 2025-01-01 18:41:28">2025-01-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Maya/">Maya</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/649c418c1ddac507cc8ceccf.jpg"></p>
<h1 id="指定贴图路径汉化版"><a href="#指定贴图路径汉化版" class="headerlink" title="指定贴图路径汉化版"></a>指定贴图路径汉化版</h1><p>脚本名称：FileTextureManager</p>
<p>脚本语言：MEL</p>
<p>脚本来源：劲爆羊工具盒子</p>
<h3 id="汉化说明："><a href="#汉化说明：" class="headerlink" title="汉化说明："></a>汉化说明：</h3><p>这个Maya指贴图工具其实功能非常强大，我是从劲暴羊工具盒知道的这个脚本，为了使用这个工具更方便，所以汉化了这个脚本；在一段时间的使用后，没发现有问题。分享给有需要的人。如果使用发现有什么问题，请使用未汉化原版本；</p>
<h3 id="汉化界面"><a href="#汉化界面" class="headerlink" title="汉化界面"></a>汉化界面</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/64a2da2d1ddac507cc6e8962.jpg"></p>
<h3 id="汉化版源码："><a href="#汉化版源码：" class="headerlink" title="汉化版源码："></a>汉化版源码：</h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//工具名称：FileTextureManager(文件纹理管理器)</span></span><br><span class="line"><span class="comment">// 汉化：三岁豆</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义选择程序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_SelCheck(<span class="keyword">string</span> $nodes[])&#123;</span><br><span class="line"><span class="keyword">int</span> $sel = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($nodes))</span><br><span class="line">	$sel = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;必须至少选择一个文件纹理节点！&quot;</span> -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> $sel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提醒用户作业已完成的进度。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> FTM_END()&#123;</span><br><span class="line">		<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;操作已完成。\n作业已完成。&quot;</span> -ma center -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//日志</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> FTM_Log (<span class="keyword">string</span> $type, <span class="keyword">string</span> $node, <span class="keyword">string</span> $log) &#123;</span><br><span class="line"><span class="keyword">string</span> $finLog;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($node))</span><br><span class="line">	$log = $node + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	$log = <span class="string">&quot;\t&quot;</span> + $log + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> ($type) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;start&quot;</span>:</span><br><span class="line">		$finLog = <span class="string">&quot;\n***************************************************************************************************************\n\</span></span><br><span class="line"><span class="string">File Texture 管理器日志启动\n\</span></span><br><span class="line"><span class="string">***************************************************************************************************************\n&quot;</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;end&quot;</span>:</span><br><span class="line">		$finLog = <span class="string">&quot;***************************************************************************************************************\n\</span></span><br><span class="line"><span class="string">File Texture 管理器日志结束\n\</span></span><br><span class="line"><span class="string">***************************************************************************************************************\n&quot;</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		$finLog = $log;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> $finLog;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取正确的路径(文件夹)格式以匹配当前操作系统。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span> FTM_GetPath (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_OldPath)</span><br><span class="line">&#123;</span><br><span class="line">	$FTM_OldPath = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_OldPath &quot;/&quot;`</span>;</span><br><span class="line">	<span class="keyword">if</span> ($FTM_FileOrPath == <span class="string">&quot;file&quot;</span>)</span><br><span class="line">		$FTM_OldPath = <span class="string">`dirname $FTM_OldPath`</span>;</span><br><span class="line">	$FTM_OldPath = <span class="string">`substitute &quot;/*$&quot; $FTM_OldPath &quot;&quot;`</span>;</span><br><span class="line">	<span class="keyword">string</span> $FTM_RightPath;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_OldPath)) $FTM_RightPath = <span class="string">`toNativePath ($FTM_OldPath + &quot;/&quot;)`</span>;</span><br><span class="line">	<span class="keyword">return</span> $FTM_RightPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取与当前操作系统匹配的输入文件全名(包括路径)的正确格式。</span></span><br><span class="line"><span class="comment">//返回一个字符串数组,第一个元素是输入文件的正确格式</span></span><br><span class="line"><span class="comment">//全名(包括路径),第二个元素是输入文件的短名称(没有路径)。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_GetFile (<span class="keyword">string</span> $FTM_OldFullPath)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">string</span> $FTM_RightPath[];</span><br><span class="line">	<span class="keyword">string</span> $FTM_PathElements[];</span><br><span class="line">	<span class="keyword">int</span> $FTM_PathElementsSize;</span><br><span class="line">	<span class="comment">// fullname</span></span><br><span class="line">	$FTM_OldFullPath = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_OldFullPath &quot;/&quot;`</span>;</span><br><span class="line">	$FTM_RightPath[<span class="number">0</span>] = <span class="string">`toNativePath $FTM_OldFullPath`</span>;</span><br><span class="line">	$FTM_PathElementsSize = <span class="string">`tokenize $FTM_OldFullPath &quot;/&quot; $FTM_PathElements`</span>;</span><br><span class="line">	$FTM_RightPath[<span class="number">1</span>] = $FTM_PathElements[$FTM_PathElementsSize - <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> $FTM_RightPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析当前场景中的所有文件纹理节点。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FileTextureAnalyst ()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">	<span class="keyword">string</span> $FTM_Files[] = <span class="keyword">eval</span>($lsCmd);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Different groups.</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_Groups[];</span><br><span class="line">	<span class="keyword">int</span> $FTM_GroupsSize;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_Files))&#123;</span><br><span class="line">		$FTM_Groups[<span class="number">0</span>] = <span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>;</span><br><span class="line">		$FTM_Groups[<span class="number">1</span>] = <span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($eachFile <span class="keyword">in</span> $FTM_Files)</span><br><span class="line">	&#123;</span><br><span class="line">		$FTM_GroupsSize = <span class="keyword">size</span>($FTM_Groups);</span><br><span class="line">		<span class="keyword">string</span> $FTM_CurrentFullPath = substituteAll (<span class="string">&quot;\\\\&quot;</span>, <span class="string">`getAttr ($eachFile + &quot;.fileTextureName&quot;)`</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">		<span class="keyword">string</span> $FTM_CurrentPath = <span class="keyword">dirname</span> ($FTM_CurrentFullPath);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_CurrentPath))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> ($j=<span class="number">2</span>; $j&lt;$FTM_GroupsSize; $j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">string</span> $buffer[];</span><br><span class="line">				<span class="keyword">tokenize</span> $FTM_Groups[$j] <span class="string">&quot;*&quot;</span> $buffer;</span><br><span class="line">				<span class="keyword">string</span> $FTM_OldPath =  $buffer[<span class="number">0</span>];</span><br><span class="line">				<span class="keyword">string</span> $cmp1 = $FTM_CurrentPath;</span><br><span class="line">				<span class="keyword">string</span> $cmp2 = $FTM_OldPath;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`about -nt`</span>) &#123;</span><br><span class="line">					$cmp1 = <span class="keyword">tolower</span>($FTM_CurrentPath);</span><br><span class="line">					$cmp2 = <span class="keyword">tolower</span>($FTM_OldPath);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> ($cmp1 == $cmp2)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">string</span> $tmp = $FTM_Groups[$j];</span><br><span class="line">					$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">					$FTM_Groups[$j] = $tmp;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ($j &gt;= $FTM_GroupsSize)</span><br><span class="line">			&#123;</span><br><span class="line">				$FTM_Groups[$FTM_GroupsSize] = $FTM_CurrentPath + <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">size</span>($FTM_CurrentFullPath))&#123;</span><br><span class="line">			<span class="keyword">string</span> $tmp = $FTM_Groups[<span class="number">1</span>];</span><br><span class="line">			$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">			$FTM_Groups[<span class="number">1</span>] = $tmp;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">string</span> $tmp = $FTM_Groups[<span class="number">0</span>];</span><br><span class="line">			$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">			$FTM_Groups[<span class="number">0</span>] = $tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> -cl;</span><br><span class="line">	<span class="keyword">return</span> $FTM_Groups;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//生成UI控件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> FTM_EditUIControl (<span class="keyword">string</span> $FTM_OptionColumn, <span class="keyword">string</span> $FTM_HelpForm)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// Operation mode</span></span><br><span class="line">	<span class="keyword">radioButtonGrp</span> -e -on1 (<span class="string">&quot;textFieldButtonGrp -e -en 0 -tx \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>)</span><br><span class="line">			-on2 (<span class="string">&quot;textFieldButtonGrp -e -en 1 -tx \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_OperationMode&quot;</span>);</span><br><span class="line"><span class="comment">// Set source directory</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;file\&quot; \&quot;&quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField\&quot; \&quot;Set_S.D.\&quot; 0&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>);</span><br><span class="line"><span class="comment">// Set target directory</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; \&quot;&quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField\&quot; \&quot;Set_T.D.\&quot; 4&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField&quot;</span>);</span><br><span class="line"><span class="comment">// Make new folder</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -on1 (<span class="string">&quot;textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>)</span><br><span class="line">			-of1 (<span class="string">&quot;textFieldGrp -e -en 0 -text \&quot;MyTextureFiles\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_MakeFolderChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Add prefix</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;textField -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>)</span><br><span class="line">			-ofc (<span class="string">&quot;textField -e -en 0 -text \&quot;prefix_\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Add suffix</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;textField -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>)</span><br><span class="line">			-ofc (<span class="string">&quot;textField -e -en 0 -text \&quot;_suffix\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Replace string</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -on1 (<span class="string">&quot;textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField; textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>)</span><br><span class="line">			-of1 (<span class="string">&quot;textFieldGrp -e -en 0 -text \&quot;OldString\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField; textFieldGrp -e -en 0 -text \&quot;NewString\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_ReplaceStringChecker&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//帮助描述字段</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_HelpDescription = <span class="string">&quot;\n 说 明:\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  文件纹理管理器适用于Windows/Linux/MAC,以一种非常方便的方式管理文件纹理。\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  File Texture Manager 基本功能：\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 分析场景文件纹理\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. 将原始纹理文件复制或移动到用户定义的路径\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. 更新文件纹理的路径\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. 也支持Mentalray纹理节点\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  FTM 额外功能：\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 替换文件纹理路径的根字符串。例如,重定向源代码\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. 根据文件纹理的分辨率设置/取消设置内存效率。大于“阈值”(Threshold)(x或y)的纹理将设置为在设置模式下使用渲染器首选格式(Maya为BOT,mentalray为.map)。如果需要,将自动生成相应的内存高效文件。取消设置时,x和y中小于阈值的所有纹理都将设置为使用法线纹理,从该文件生成了内存高效纹理。BOT取消设置假设法线纹理存在于同一目录中。Mentalray.map unset将首先检查是否存在法线纹理。如果没有,FTM将尝试从.map文件中提取一个。指向序列的节点将被忽略。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. 将筛选类型设置为选定文件节点的指定类型。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. 将选定文件节点的纹理文件格式从“从”转换为“到”。如果“From”不是“*\”,则只处理纹理文件格式与“From \”匹配的文件节点。对于使用图像序列作为纹理文件的文件节点,需要指定转换范围,因此只打印出相应的命令,而不是真正执行任务。此函数使用Maya“imgcvt\”和mentalray\“imf_copy”多功能进行转换,因此请确保它们可以在系统可执行路径中找到。\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;【工作流程】：\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  步骤 1. 分析场景文件纹理(可选择方式)\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  步骤 2. 通过选中UI中的相关复选框,选择要管理的场景文件纹理(节点)\n         也可以通过自己的方法执行此操作,例如在Hypershade中选择它们。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  步骤 3. 根据需要设置选项。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  步骤 4. 通过按下相关按钮进行复制、移动或设置。\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;【小贴士】：\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 始终为每个纹理文件保留两个不同的版本。例如,“abc_LowRes.tga\”处于低分辨率,而“abc_HighRes.tga”处于高分辨率。使用低分辨率纹理来加速交互。只需记住在渲染之前使用FileTextureManager将每个文件纹理重置为指向相关的高分辨率纹理即可。(添加前缀、添加后缀,甚至替换字符串。)\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. File Texture Manager 的UI不会像属性编辑器那样动态更新,因此最好重新-分析场景文件纹理 每次完成FTM工作时。如果您根本不使用分析功能,则无需执行此操作。\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;【注释】：\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 如果用户决定创建一个新文件夹,最终目标目录将等于目标目录加上新文件夹。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. 添加后缀功能对纹理文件名有限制。为了确保它按要求工作,文件名必须是常规格式,例如 filename.ext\”、“filename.[#…#].ext\“、\”filename.ext.[#…#]\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. 添加prfix、添加后缀和替换字符串可以同时执行到每个文件纹理。替换字符串首先计算,然后添加后缀,最后添加前缀。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. 强烈建议不要在前缀、后缀、旧字符串和新字符串中包含“.\”。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  5. 有时过程会失败。原因可能多种多样。最可能的原因可能是以下两个原因之一或两者：a.在源目录中找不到纹理文件；b.被拒绝阅读、书写或删除。\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;【详情】:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 分析场景文件纹理可以让你知道场景中有多少文件纹理,在哪里,它们是否存在,等等。它还允许用户只需单击一次就可以选择指向同一路径的所有纹理文件。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. 如何选择操作模式取决于不同的源目录状态。如果文件所在位置,请使用“自动”模式,否则请使用“手动”模式。\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. 其他功能如UI中所示非常明确。\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">scrollField</span> -e -<span class="keyword">text</span> $FTM_HelpDescription ($FTM_HelpForm + <span class="string">&quot;|FTM_HelpField&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断输入字符串是格式扩展名、序列还是只是文件基名称的一部分</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_FCWhatIs(<span class="keyword">string</span> $string)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> $isWhat;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">$string = <span class="keyword">tolower</span>($string);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">stringArrayCount</span>($string,$FTM_FCAllFormats))</span><br><span class="line">	$isWhat = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">size</span>(<span class="keyword">match</span>(<span class="string">&quot;[0-9]*&quot;</span>,$string)) == <span class="keyword">size</span>($string))</span><br><span class="line">	$isWhat = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ($string == <span class="string">&quot;bot&quot;</span>)</span><br><span class="line">	$isWhat = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	$isWhat = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $isWhat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断纹理文件格式,仅根据可能的扩展名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FCFileRegularName(<span class="keyword">string</span> $file)</span><br><span class="line">&#123;</span><br><span class="line">$file = substituteAll (<span class="string">&quot;\\\\&quot;</span>, $file, <span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $fileRegularName[] = <span class="keyword">stringToStringArray</span>(<span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>),<span class="string">&quot;.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $fileName;</span><br><span class="line"><span class="keyword">string</span> $seqNum;</span><br><span class="line"><span class="keyword">string</span> $fileFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (<span class="keyword">size</span>($fileRegularName))</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>: </span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		<span class="keyword">if</span> (FTM_FCWhatIs($fileRegularName[<span class="number">1</span>]) == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			$fileFormat = $fileRegularName[<span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($fileRegularName[<span class="number">1</span>]) == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			$seqNum = $fileRegularName[<span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> </span><br><span class="line">			$fileName = <span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>: </span><br><span class="line">		<span class="keyword">string</span> $lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileFormat = $lastPiece;</span><br><span class="line">			$fileName = <span class="keyword">basenameEx</span>($file);</span><br><span class="line">			$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>];</span><br><span class="line">			<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				$seqNum = $lastPiece;</span><br><span class="line">				$fileName = <span class="keyword">basenameEx</span>($fileName);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$seqNum = $lastPiece;</span><br><span class="line">			$fileName = <span class="keyword">basenameEx</span>($file);</span><br><span class="line">			$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>];</span><br><span class="line">			<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				$fileFormat = $lastPiece;</span><br><span class="line">				$fileName = <span class="keyword">basenameEx</span>($fileName);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">3</span>) </span><br><span class="line">			&#123;</span><br><span class="line">			$fileFormat = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>] + <span class="string">&quot;.bot&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">size</span>($fileRegularName) == <span class="number">3</span>)</span><br><span class="line">				$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">				$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-3</span>];</span><br><span class="line">				<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">					&#123;</span><br><span class="line">					$seqNum = $lastPiece;</span><br><span class="line">					$fileName = <span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>($file)));</span><br><span class="line">					&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$fileName = <span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>($file));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">// really sick!!!</span></span><br><span class="line">			$fileName = <span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">$fileRegularName[<span class="number">0</span>] = $fileName;</span><br><span class="line">$fileRegularName[<span class="number">1</span>] = $seqNum;</span><br><span class="line">$fileRegularName[<span class="number">2</span>] = $fileFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $fileRegularName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span> FTM_FCSubstituteLastPattern(<span class="keyword">string</span> $inputString, <span class="keyword">string</span> $targetPattern, <span class="keyword">string</span> $newPattern)</span><br><span class="line">&#123;</span><br><span class="line">$inputString = substituteAll(<span class="string">&quot;\\\\&quot;</span>, $inputString, <span class="string">&quot;/&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $exp1 = <span class="string">&quot;^.*&quot;</span> + $targetPattern + <span class="string">&quot;+&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $noTail = <span class="keyword">match</span>($exp1,$inputString);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $exp2 = $targetPattern + <span class="string">&quot;+$&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $newNoEnd = <span class="keyword">substitute</span>($exp2,$noTail,$newPattern);</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">	$noTail = <span class="string">`substituteAllString $noTail $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line"><span class="keyword">string</span> $exp3 = <span class="string">&quot;^&quot;</span> + $noTail + <span class="string">&quot;+&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $outputString = <span class="keyword">substitute</span>($exp3,$inputString,$newNoEnd);</span><br><span class="line"></span><br><span class="line">$outputString = <span class="keyword">toNativePath</span>($outputString);</span><br><span class="line"><span class="keyword">return</span> $outputString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析输入文件名的位数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_FCDigitsNumber(<span class="keyword">string</span> $fileName)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $fileRegularName[] = FTM_FCFileRegularName($fileName);</span><br><span class="line">$fileName = FTM_FCSubstituteLastPattern($fileName,$fileRegularName[<span class="number">1</span>],<span class="string">&quot;*&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $filesInSeq[] = <span class="string">`getFileList -fs $fileName`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> $digiNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($filesInSeq);$i++)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">string</span> $tmp[] = FTM_FCFileRegularName($filesInSeq[$i]);</span><br><span class="line">	<span class="keyword">if</span> ($digiNum &lt;= <span class="keyword">size</span>($tmp[<span class="number">1</span>]))</span><br><span class="line">		$digiNum = <span class="keyword">size</span>($tmp[<span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $digiNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件格式转换器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">proc</span> FTM_FCGo(<span class="keyword">int</span> $progressUI, <span class="keyword">string</span> $sourceFormatUI, <span class="keyword">string</span> $targetFormat, <span class="keyword">int</span> $handleSeq, <span class="keyword">int</span> $updatePath, <span class="keyword">int</span> $removeOrig)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (FTM_SelCheck(<span class="string">`ls -sl -typ file `</span>)) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $fileNodesList[] = FTM_FCGetMatches($sourceFormatUI);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> $isSeq[];</span><br><span class="line">	<span class="keyword">int</span> $isOneOfSeq[];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $file;</span><br><span class="line">	<span class="keyword">string</span> $fileFC;</span><br><span class="line">	<span class="keyword">string</span> $fileUpdatePath;</span><br><span class="line">	<span class="keyword">string</span> $fileRemove;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ($progressUI) &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size($fileNodesList)`</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($fileNodesList);$i++)&#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($fileNodesList[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($progressUI)&#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$progress = $i+<span class="number">1</span>;</span><br><span class="line">			$percentage = $progress * (<span class="number">100</span>/<span class="keyword">size</span>($fileNodesList));</span><br><span class="line">			<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Handling &quot;</span> + $fileNodesList[$i] + <span class="string">&quot;     ......  &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		$file = <span class="keyword">toNativePath</span>(substituteAll(<span class="string">&quot;\\\\&quot;</span>,<span class="string">`getAttr ($fileNodesList[$i] + &quot;.fileTextureName&quot;)`</span>,<span class="string">&quot;/&quot;</span>));</span><br><span class="line">		$fileFC = $file;</span><br><span class="line">		$fileRemove = $file;</span><br><span class="line">		<span class="keyword">string</span> $fileRegularName[] = FTM_FCFileRegularName($file);</span><br><span class="line">		<span class="keyword">string</span> $isBOT = <span class="string">`match &quot;bot&quot; $fileRegularName[2]`</span>;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">size</span>($isBOT)) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;Texture file is a BOT file. Skipped!&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">string</span> $targetFile = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">2</span>],$targetFormat);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!<span class="keyword">size</span>($fileRegularName[<span class="number">2</span>]))</span><br><span class="line">			$targetFile += <span class="string">&quot;.&quot;</span> + $targetFormat;</span><br><span class="line">		$fileUpdatePath = $targetFile;</span><br><span class="line">		<span class="keyword">string</span> $cmp1,$cmp2;</span><br><span class="line">		$cmp1 = $fileUpdatePath;</span><br><span class="line">		$cmp2 = $fileRemove;</span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`about -nt`</span>) &#123;</span><br><span class="line">			$cmp1 = <span class="keyword">toNativePath</span>(<span class="keyword">tolower</span>($cmp1));</span><br><span class="line">			$cmp2 = <span class="keyword">toNativePath</span>(<span class="keyword">tolower</span>($cmp2));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>($cmp1 == $cmp2)</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;This file node was already handled before. Process skipped.&quot;</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			$isSeq[$i] = <span class="number">0</span>;</span><br><span class="line">			$isOneOfSeq[$i] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="string">`nodeType $fileNodesList[$i]`</span> == <span class="string">&quot;file&quot;</span> &amp;&amp; <span class="keyword">size</span>($fileRegularName[<span class="number">1</span>])) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`getAttr ($fileNodesList[$i] + &quot;.useFrameExtension&quot;)`</span>)</span><br><span class="line">					$isSeq[$i] = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$isOneOfSeq[$i] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span> $isMR_c = <span class="number">0</span>; </span><br><span class="line">			<span class="keyword">int</span> $isMR_x = <span class="number">0</span>; </span><br><span class="line">			<span class="keyword">if</span> ($fileRegularName[<span class="number">2</span>] == <span class="string">&quot;map&quot;</span> &amp;&amp; $targetFormat != <span class="string">&quot;map&quot;</span>)</span><br><span class="line">				$isMR_x = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($fileRegularName[<span class="number">2</span>] != <span class="string">&quot;map&quot;</span> &amp;&amp; $targetFormat == <span class="string">&quot;map&quot;</span>)</span><br><span class="line">				$isMR_c = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmdFC = <span class="string">&quot;system(\&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> ($isMR_c)</span><br><span class="line">				$cmdFC += <span class="string">&quot;imf_copy -p -r&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($isMR_x)</span><br><span class="line">				$cmdFC += <span class="string">&quot;imf_copy&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				$cmdFC += <span class="string">&quot;imgcvt -t &quot;</span> + $targetFormat;</span><br><span class="line">			<span class="keyword">string</span> $cmdUpdatePath = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $fileNodesList[$i] + <span class="string">&quot;.fileTextureName &quot;</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmdRemoveOrig = <span class="string">&quot;sysFile -del \&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!$handleSeq &amp;&amp; $isSeq[$i])</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence was not selected to be handled. Skipped.&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> &#123; </span><br><span class="line">				<span class="keyword">if</span> ($handleSeq &amp;&amp; $isSeq[$i])&#123;</span><br><span class="line">					<span class="keyword">string</span> $padding = <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">for</span> ($j=<span class="number">0</span>;$j&lt;FTM_FCDigitsNumber($file);$j++)</span><br><span class="line">						$padding += <span class="string">&quot;@&quot;</span>;</span><br><span class="line">					$targetFile = FTM_FCSubstituteLastPattern($targetFile,$fileRegularName[<span class="number">1</span>],$padding);</span><br><span class="line">					$fileFC = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">1</span>],$padding);</span><br><span class="line">					$fileRemove = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">1</span>],<span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> (!$isMR_c &amp;&amp; !$isMR_x)</span><br><span class="line">						$cmdFC += <span class="string">&quot; -n startIn endIn stepIn -N startOut endOut stepOut&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				$cmdFC += <span class="string">&quot; \\\&quot;&quot;</span> + <span class="keyword">encodeString</span>($fileFC) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + <span class="keyword">encodeString</span>($targetFile) + <span class="string">&quot;\\\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> ($isMR_c || $isMR_x)</span><br><span class="line">					$cmdFC += <span class="string">&quot; &quot;</span> + $targetFormat + <span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$cmdFC += <span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion skipped. New format texture exists, maybe convertion has been done before.&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span>&#123; </span><br><span class="line">					<span class="keyword">if</span> (!$isSeq[$i])&#123;</span><br><span class="line">						<span class="keyword">string</span> $cmdFCFeedback = <span class="keyword">eval</span>($cmdFC);</span><br><span class="line">						<span class="keyword">if</span> (<span class="keyword">size</span>($cmdFCFeedback))</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $cmdFCFeedback;</span><br><span class="line">						<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Convertion succeeded. Converted from \&quot;&quot;</span> + $fileFC + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + $targetFile + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion failed. Could be file permission problem, disk capacity problem or source texture is of unknown/unsupported format.&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> &#123;</span><br><span class="line">						<span class="keyword">if</span> (!$isMR_c &amp;&amp; !$isMR_x)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (format conversion):&quot;</span> + $cmdFC);</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified. Use \&quot;imf_copy\&quot; to convert your tetures. A simple loop might be needed.&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> ($updatePath) &#123;</span><br><span class="line">					$cmdUpdatePath += <span class="string">&quot;\&quot;&quot;</span> + <span class="keyword">encodeString</span>(<span class="keyword">toNativePath</span>($fileUpdatePath)) + <span class="string">&quot;\&quot;;&quot;</span>;</span><br><span class="line">					$cmdRemoveOrig += <span class="keyword">encodeString</span>($fileRemove) + <span class="string">&quot;\&quot;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> (!$isSeq[$i])&#123;</span><br><span class="line">						<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)&#123;</span><br><span class="line">							<span class="keyword">if</span>(<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmdUpdatePath))) &#123;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Path updating failed. So Original Texture Removing will not be done even if it was selected to.&quot;</span>;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span> &#123;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Path updating succeeded. Set to \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($fileUpdatePath)) + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">								</span><br><span class="line">								<span class="keyword">if</span> ($removeOrig)&#123;</span><br><span class="line">									<span class="keyword">if</span> ($isOneOfSeq[$i])</span><br><span class="line">										FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Only one file of a whole sequence is used as texture, no file in the sequence is supposed to be removed.&quot;</span>;</span><br><span class="line">									<span class="keyword">else</span> <span class="keyword">if</span> (!$isSeq[$i])&#123;</span><br><span class="line">										<span class="keyword">if</span> (!<span class="keyword">eval</span>($cmdRemoveOrig))</span><br><span class="line">											FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Original texture removing failed, could be file permission problem.&quot;</span>;</span><br><span class="line">										<span class="keyword">else</span></span><br><span class="line">											FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Original texture removing succeeded. Removed \&quot;&quot;</span> + $fileRemove + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">									&#125;</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion failed, Path Updating and Original Texture Removing will not be done even if they were selected to.&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> &#123;</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (update path info):&quot;</span> + $cmdUpdatePath);</span><br><span class="line">						<span class="keyword">if</span> ($removeOrig)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (remove original textures):&quot;</span> + $cmdRemoveOrig);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (!<span class="keyword">size</span>($fileNodesList))</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;No texture is of specified format.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">if</span> ($progressUI)&#123;</span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		FTM_END;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FCGetMatches (<span class="keyword">string</span> $formatUI)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $fileNodesList[];</span><br><span class="line"><span class="keyword">string</span> $tmpNodesList[] = <span class="string">`ls -sl -typ file `</span>; </span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $tmpNodesList`</span>) &#123;</span><br><span class="line">	<span class="keyword">string</span> $tmpNode; </span><br><span class="line">	<span class="keyword">string</span> $tmpFile; </span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $format = <span class="string">`optionMenu -q -v $formatUI`</span>;</span><br><span class="line">	<span class="keyword">if</span> ($format!=<span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line">		<span class="keyword">for</span> ($tmpNode <span class="keyword">in</span> $tmpNodesList)	&#123;</span><br><span class="line">			$tmpFile = <span class="string">`getAttr ($tmpNode + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $tmpFileRegularName[] = FTM_FCFileRegularName($tmpFile);</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">tolower</span>($tmpFileRegularName[<span class="number">2</span>]) == <span class="keyword">tolower</span>($format))</span><br><span class="line">				$fileNodesList[<span class="keyword">size</span>($fileNodesList)] = $tmpNode;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		$fileNodesList = $tmpNodesList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> $fileNodesList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_FCGatherInfo(<span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $sourceFormatUI = $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $targetFormat = <span class="string">`optionMenu -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_FCRow|FTM_FCTargetMenu&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $handleSeq = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_SeqCheck&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $updatePath = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_UpdateCheck&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $removeOrig = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_RemoveCheck&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">FTM_FCGo 	<span class="number">1</span></span><br><span class="line">		$sourceFormatUI</span><br><span class="line">		$targetFormat</span><br><span class="line">		$handleSeq</span><br><span class="line">		$updatePath</span><br><span class="line">		$removeOrig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_FilterSetup(<span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $Nodes[] = <span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $Nodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $filterType = <span class="string">`optionMenu -q -sl ($FTM_ExtraFunctionColumn+&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;)`</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">string</span> $filter = <span class="string">`optionMenu -q -v ($FTM_ExtraFunctionColumn+&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $Nodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($Nodes);$i++) &#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($Nodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($Nodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting filter type, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr &quot;</span> + $Nodes[$i] + <span class="string">&quot;.filterType &quot;</span> + $filterType;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd)))</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Attribute \&quot;filterType\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Set filter type to \&quot;&quot;</span> + $filter + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_BOTSetup(<span class="keyword">int</span> $FTM_BOTMode, <span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $FTM_FileNodes[]=<span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_FileNodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_FileNodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_FileNodes); $i++)&#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($FTM_FileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($FTM_FileNodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting BOT options, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.useFrameExtension&quot;)`</span>) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified, Skipped!&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $resolution = <span class="string">`intFieldGrp -q -v1 ($FTM_ExtraFunctionColumn + &quot;|FTM_BOTRow|FTM_BOTResFieldGrp&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $xRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeX&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $yRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeY&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($FTM_BOTMode) &#123;</span><br><span class="line">			<span class="keyword">if</span> ($xRes &gt;= $resolution || $yRes &gt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheBOT = <span class="string">`substitute &quot;(\\.bot)*$&quot; $FTM_File &quot;&quot;`</span> + <span class="string">&quot;.bot&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $BOTCmd = <span class="string">&quot;makebot -c  -r &quot;</span> + $resolution + <span class="string">&quot; -i \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot; -o \&quot;&quot;</span> + $FTM_TheBOT + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($BOTCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT file generation failed. Could be permission issue or the BOT file already exists.&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $cacheCmd = <span class="string">&quot;setAttr &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.useCache 1&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_TheBOT + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cacheCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;useCache\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT setup OK.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is LOWER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> ($xRes &lt;= $resolution &amp;&amp; $yRes &lt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $cacheCmd = <span class="string">&quot;setAttr &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.useCache 0&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substitute &quot;(\\.bot)*$&quot; $FTM_File &quot;&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cacheCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;useCache\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTexturename\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT cancelled successfully.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is HIGHER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_MAPSetup(<span class="keyword">int</span> $FTM_MAPMode, <span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $FTM_FileNodes[]=<span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_FileNodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_FileNodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_FileNodes); $i++)&#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($FTM_FileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($FTM_FileNodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting up mentalray memory-mapped textures, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.useFrameExtension&quot;)`</span>) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified, Skipped!&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $resolution = <span class="string">`intFieldGrp -q -v1 ($FTM_ExtraFunctionColumn + &quot;|FTM_MAPRow|FTM_MAPResFieldGrp&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $xRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeX&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $yRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeY&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($FTM_MAPMode) &#123;</span><br><span class="line">			<span class="keyword">if</span> ($xRes &gt;= $resolution || $yRes &gt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheMAP = <span class="string">`substitute &quot;(\\.map)*$&quot; $FTM_File &quot;&quot;`</span> + <span class="string">&quot;.map&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $MAPCmd = <span class="string">&quot;system(\&quot;imf_copy -p -r \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_File`</span>)) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_TheMAP`</span>)) + <span class="string">&quot;\\\&quot; map\&quot;)&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`file -q -ex $FTM_TheMAP`</span>)&#123;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Mentalray memory-mapped texture file \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot; already exists. FTM will directly use it.&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($MAPCmd)))</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture file generation failed. Could be permission issue or &#x27;imf_copy&#x27; can not be found in system executable path.&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_TheMAP + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture setup accomplished.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is LOWER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> ($xRes &lt;= $resolution &amp;&amp; $yRes &lt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheMAP = $FTM_File;</span><br><span class="line">				$FTM_File = <span class="string">`substitute &quot;(\\.map)*$&quot; $FTM_File &quot;&quot;`</span>;</span><br><span class="line">				<span class="keyword">int</span> $wrong = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span> (!<span class="string">`file -q -ex $FTM_File`</span>)&#123;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Normal texture file \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_File`</span> + <span class="string">&quot;\&quot; doesn&#x27;t exist.&quot;</span>);</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;FTM is trying to extract one (in Maya iff format) from \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">					<span class="keyword">string</span> $UnMAPCmd = <span class="string">&quot;system(\&quot;imf_copy \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_TheMAP`</span>)) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_File`</span>)) + <span class="string">&quot;\\\&quot; iff\&quot;)&quot;</span>;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($UnMAPCmd))) &#123;</span><br><span class="line">						$wrong = <span class="number">1</span>;</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: Extracting normal texture file from \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot; failed.&quot;</span>);</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;         Could be permission issue, or &#x27;imf_copy&#x27; can not be found in system executable path, or original .map file is not a mentalray memory-mapped texture file.&quot;</span>;</span><br><span class="line">					&#125; <span class="keyword">else</span></span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Extraction succeed. =&gt; \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_File`</span> + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line">					<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTexturename\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture file unset accomplished.&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is HIGHER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_Substitute(<span class="keyword">string</span> $oldRootField, <span class="keyword">string</span> $newRootField)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $oldRoot = <span class="string">`textFieldButtonGrp -q -text $oldRootField`</span>;</span><br><span class="line">$oldRoot = substituteAll(<span class="string">&quot;\\\\&quot;</span>,$oldRoot,<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $newRoot = <span class="string">`textFieldButtonGrp -q -text $newRootField`</span>;</span><br><span class="line">$newRoot = substituteAll(<span class="string">&quot;\\\\&quot;</span>,$newRoot,<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($oldRoot)==<span class="number">0</span> || <span class="keyword">size</span>($newRoot)==<span class="number">0</span>)</span><br><span class="line">	<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;Both the Old Root filed and the New Root field must be filled!&quot;</span> -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">string</span> $fileNodes[] = <span class="string">`ls -sl -typ file  -typ psdFileTex`</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`FTM_SelCheck $fileNodes`</span>)&#123;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state <span class="number">1</span>;</span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line">		<span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">			$oldRoot = <span class="string">`substituteAllString $oldRoot $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $node;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $fileNodes`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($fileNodes);$i++) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> ($fileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$progress = $i;</span><br><span class="line">			$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($fileNodes);</span><br><span class="line">			<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Redirecting, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">string</span> $old = <span class="string">`getAttr ($fileNodes[$i]+&quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">			$old = <span class="string">`substituteAll &quot;\\\\&quot; $old &quot;/&quot;`</span>;</span><br><span class="line">			<span class="keyword">string</span> $new = <span class="string">`substitute $oldRoot $old $newRoot`</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $fileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $new + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Set to \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($new)) + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">			<span class="keyword">if</span> (!<span class="string">`file -q -ex $new`</span>)</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($new)) + <span class="string">&quot;\&quot; doesn&#x27;t exist!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		FTM_END;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> <span class="keyword">string</span> getDirectoryFromTexCheck(<span class="keyword">string</span> $checkLabel)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> ($checkLabel+<span class="string">&quot;/&quot;</span>) FTM_TargetDirectoryField;</span><br><span class="line">	<span class="keyword">return</span> $checkLabel;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_AnalyseFileTextures (<span class="keyword">string</span> $FTM_ParentUI)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $FTM_Groups[] = <span class="string">`FTM_FileTextureAnalyst`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`columnLayout -q -ex ($FTM_ParentUI + &quot;|FTM_AnalysisCheckerColumn&quot;)`</span>)</span><br><span class="line">		<span class="keyword">deleteUI</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_Groups) == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">text</span> -e -l <span class="string">&quot;找不到贴图文件&quot;</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">text</span> -e -l <span class="string">&quot;分析：&quot;</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">setParent</span> $FTM_ParentUI;</span><br><span class="line">		<span class="keyword">columnLayout</span> FTM_AnalysisCheckerColumn;</span><br><span class="line">		<span class="keyword">int</span> $FTM_Groups_Size = <span class="keyword">size</span>($FTM_Groups);</span><br><span class="line">		<span class="keyword">if</span> ($FTM_Groups[<span class="number">0</span>] == <span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>)</span><br><span class="line">			$FTM_Groups_Size -= <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> ($FTM_Groups[<span class="number">1</span>] == <span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>)</span><br><span class="line">			$FTM_Groups_Size -= <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">		<span class="keyword">string</span> $FTM_TotalResults = <span class="string">&quot;总计 &quot;</span> + <span class="keyword">size</span>(<span class="keyword">eval</span>($lsCmd)) + <span class="string">&quot; 文件纹理指向 &quot;</span> + $FTM_Groups_Size + <span class="string">&quot;个路径 : &quot;</span>;</span><br><span class="line">		<span class="keyword">text</span> -l $FTM_TotalResults;</span><br><span class="line">		<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span> -h <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">for</span> ($FTM_Group <span class="keyword">in</span> $FTM_Groups)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">string</span> $buffer[];</span><br><span class="line">			<span class="keyword">tokenize</span> $FTM_Group <span class="string">&quot;*&quot;</span> $buffer;</span><br><span class="line">			<span class="keyword">int</span> $FTM_FilesStoredSize = <span class="keyword">size</span> ($buffer)<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentPath = $buffer[<span class="number">0</span>];</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">string</span> $FTM_FileTexturesAnalysis;</span><br><span class="line">			<span class="keyword">if</span> ($FTM_CurrentPath==<span class="string">&quot;FTM_EmptySocket_FTM&quot;</span> &amp;&amp; $FTM_FilesStoredSize&gt;<span class="number">0</span>)</span><br><span class="line">				$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; 未指定纹理。所以它们不存在。&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_CurrentPath==<span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span> &amp;&amp; $FTM_FilesStoredSize&gt;<span class="number">0</span>)</span><br><span class="line">				$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; 没有贴图路径信息 纹理不存在 &quot;</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_FilesStoredSize&gt;<span class="number">0</span>)&#123;</span><br><span class="line">					$FTM_CurrentPath = <span class="string">`FTM_GetPath &quot;路径&quot; $FTM_CurrentPath`</span>;</span><br><span class="line">					$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; 个贴图路径指向： \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($FTM_CurrentPath)) + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentFile[];</span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_Exist[] = &#123;&#125;;</span><br><span class="line">			<span class="keyword">int</span> $FTM_ExistSize = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_NotExist[] = &#123;&#125;;</span><br><span class="line">			<span class="keyword">int</span> $FTM_NotExistSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> ($i=<span class="number">1</span>; $i&lt;<span class="keyword">size</span>($buffer); $i++)</span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				$FTM_CurrentFile[$i] = $buffer[$i];</span><br><span class="line">				$FTM_CurrentFiles = $FTM_CurrentFiles + $FTM_CurrentFile[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentFilePath = <span class="string">`getAttr ($FTM_CurrentFile[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				<span class="keyword">if</span> ( <span class="string">`file -q -ex $FTM_CurrentFilePath`</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					$FTM_Exist[$FTM_ExistSize] = $FTM_CurrentFile[$i];</span><br><span class="line">					$FTM_ExistSize = $FTM_ExistSize + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					$FTM_NotExist[$FTM_NotExistSize] = $FTM_CurrentFile[$i];</span><br><span class="line">					$FTM_NotExistSize = $FTM_NotExistSize + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_FileTexturesAnalysis)) &#123;</span><br><span class="line">					<span class="keyword">string</span> $FTM_MainChecker = <span class="string">`checkBox -l $FTM_FileTexturesAnalysis -al left`</span>;</span><br><span class="line">					<span class="keyword">popupMenu</span> -p $FTM_MainChecker;</span><br><span class="line">					<span class="keyword">string</span> $cmd = <span class="string">&quot;getDirectoryFromTexCheck(\&quot;&quot;</span>+$buffer[<span class="number">0</span>]+<span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line">					</span><br><span class="line">					<span class="keyword">menuItem</span> -label <span class="string">&quot;复制&quot;</span> -c $cmd;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FileTexturesAnalysis;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">string</span> $FTM_ExistSubChecker;</span><br><span class="line">				<span class="keyword">string</span> $FTM_NotExistSubChecker;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_CurrentPath!=<span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>  &amp;&amp; $FTM_CurrentPath!=<span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">columnLayout</span> -adj <span class="number">1</span> -cat left <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">						<span class="keyword">string</span> $FTM_ExistFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$FTM_ExistSize; $i++)</span><br><span class="line">							$FTM_ExistFiles = $FTM_ExistFiles + $FTM_Exist[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">						$FTM_ExistSubChecker = <span class="string">`checkBox -l ($FTM_ExistSize + &quot;个贴图已连接&quot;) -al left</span></span><br><span class="line"><span class="string">							-onc (&quot;select -add &quot; + $FTM_ExistFiles) -ofc (&quot;if (&quot; + $FTM_ExistSize + &quot; &gt; 0) select -deselect &quot; + $FTM_ExistFiles)`</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">						<span class="keyword">string</span> $FTM_NotExistFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$FTM_NotExistSize; $i++)</span><br><span class="line">							$FTM_NotExistFiles = $FTM_NotExistFiles + $FTM_NotExist[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">						$FTM_NotExistSubChecker = <span class="string">`checkBox -l ($FTM_NotExistSize + &quot;个贴图未连接&quot;) -al left</span></span><br><span class="line"><span class="string">							-onc (&quot;select -add &quot; + $FTM_NotExistFiles) -ofc (&quot;if (&quot; + $FTM_NotExistSize + &quot; &gt; 0) select -deselect &quot; + $FTM_NotExistFiles)`</span>;</span><br><span class="line">					<span class="keyword">setParent</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">					<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;select -add &quot;</span> + $FTM_CurrentFiles + <span class="string">&quot;;checkBox -e -v 1 -vis 0 &quot;</span> + $FTM_ExistSubChecker + <span class="string">&quot;;checkBox -e -v 1 -vis 0 &quot;</span> + $FTM_NotExistSubChecker)</span><br><span class="line">						-ofc (<span class="string">&quot;if (&quot;</span> + $FTM_FilesStoredSize + <span class="string">&quot; &gt; 0) select -deselect &quot;</span> + $FTM_CurrentFiles + <span class="string">&quot;;checkBox -e -v 0 -vis 1 &quot;</span> + $FTM_ExistSubChecker + <span class="string">&quot;;checkBox -e -v 0 -vis 1 &quot;</span> + $FTM_NotExistSubChecker)</span><br><span class="line">						$FTM_MainChecker;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;select -add &quot;</span> + $FTM_CurrentFiles) -ofc (<span class="string">&quot;if (&quot;</span> + $FTM_FilesStoredSize + <span class="string">&quot; &gt; 0) select -deselect &quot;</span> + $FTM_CurrentFiles) $FTM_MainChecker;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_BrowseCmd (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_TextField, <span class="keyword">string</span> $FTM_WhichButton, <span class="keyword">int</span> $FTM_BrowseType)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_WorkSpace) == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		$FTM_WorkSpace = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">		$FTM_WorkSpace = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_WorkSpace`</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">workspace</span> -dir $FTM_WorkSpace;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA;</span><br><span class="line">	<span class="keyword">if</span> ($FTM_NEW_MAYA) &#123;</span><br><span class="line">		<span class="keyword">if</span> ($FTM_BrowseType == <span class="number">0</span>) $FTM_BrowseType = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_BrowseType == <span class="number">4</span>) $FTM_BrowseType = <span class="number">3</span>;</span><br><span class="line">		<span class="keyword">string</span> $return[] = <span class="string">`fileDialog2 -ds 2 -cap $FTM_WhichButton -dir $FTM_WorkSpace -fm $FTM_BrowseType -okc $FTM_WhichButton -cc &quot;Cancel&quot;`</span>;</span><br><span class="line">		<span class="keyword">string</span> $path = $return[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (!<span class="keyword">size</span>($path)) $path = <span class="string">`textFieldButtonGrp -q -text $FTM_TextField`</span>;</span><br><span class="line">		<span class="keyword">if</span> ($FTM_FileOrPath == <span class="string">&quot;file&quot;</span>) $path += <span class="string">&quot;bugQuickFix&quot;</span>;</span><br><span class="line">		FTM_ChangeTextField $FTM_FileOrPath $FTM_TextField $path <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">string</span> $FTM_Temp = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			$FTM_Temp += <span class="string">&quot;FTM_ChangeTextField &quot;</span>;</span><br><span class="line">			$FTM_Temp += (<span class="string">&quot;\&quot;&quot;</span> + $FTM_FileOrPath + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">			$FTM_Temp += (<span class="string">&quot;\&quot;&quot;</span> + $FTM_TextField + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">		fileBrowser $FTM_Temp $FTM_WhichButton <span class="string">&quot;&quot;</span> $FTM_BrowseType;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_ChangeTextField (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_TextField, <span class="keyword">string</span> $FTM_File, <span class="keyword">string</span> $FTM_FileType)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">string</span> $FTM_Path = <span class="string">`FTM_GetPath $FTM_FileOrPath $FTM_File`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> (<span class="keyword">toNativePath</span>($FTM_Path)) $FTM_TextField;</span><br><span class="line">	<span class="keyword">string</span> $os = <span class="string">`about -os`</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">gmatch</span>($os, <span class="string">&quot;*irix*&quot;</span>) || <span class="keyword">gmatch</span>($os, <span class="string">&quot;*linux*&quot;</span>))</span><br><span class="line">		<span class="keyword">window</span> -e -vis false projectViewerWindow;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	$FTM_WorkSpace = $FTM_Path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_ResetUI (<span class="keyword">string</span> $FTM_OptionColumn,<span class="keyword">string</span> $FTM_AnalysisColumn,<span class="keyword">string</span> $FTM_ExtraFunctionColumn,<span class="keyword">string</span> $FTM_Tabs,<span class="keyword">string</span> $FTM_CopyButton,<span class="keyword">string</span> $FTM_MoveButton,<span class="keyword">string</span> $FTM_SetButton)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">	<span class="keyword">window</span> -e -wh $FTM_WIDTH $FTM_HEIGHT FTM_MainWindow;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">text</span> -e -l <span class="string">&quot;未分析场景文件&quot;</span> ($FTM_AnalysisColumn + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`columnLayout -q -ex ($FTM_AnalysisColumn + &quot;|FTM_AnalysisCheckerColumn&quot;)`</span>)</span><br><span class="line">		<span class="keyword">deleteUI</span> ($FTM_AnalysisColumn + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line">	<span class="keyword">radioButtonGrp</span> -e -<span class="keyword">select</span> <span class="number">1</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_OperationMode&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>);</span><br><span class="line">	<span class="keyword">string</span> $FTM_CurrentProject = <span class="string">`workspace -q -rd`</span>;</span><br><span class="line">	<span class="keyword">string</span> $FTM_CurrentSourceImagesDir = $FTM_CurrentProject + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">	<span class="keyword">string</span> $FTM_SourceImages = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_CurrentSourceImagesDir`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> $FTM_SourceImages ($FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -v1 <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_MakeFolderChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;MyTextureFiles&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textField</span> -e -<span class="keyword">text</span> <span class="string">&quot;prefix_&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textField</span> -e -<span class="keyword">text</span> <span class="string">&quot;_suffix&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -v1 <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_ReplaceStringChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;OldString&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;NewString&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField&quot;</span>);</span><br><span class="line">	<span class="keyword">string</span> $tmp = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">	$tmp = <span class="string">`FTM_GetPath &quot;path&quot; $tmp`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> $tmp ($FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">	<span class="keyword">intFieldGrp</span> -e -v1 <span class="number">1024</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_BOTRow|FTM_BOTResFieldGrp&quot;</span>);</span><br><span class="line">	<span class="keyword">intFieldGrp</span> -e -v1 <span class="number">1024</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_MAPRow|FTM_MAPResFieldGrp&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;Mipmap&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;\*&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;iff&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCTargetMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_SeqCheck&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">1</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_UpdateCheck&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> -en <span class="number">1</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">tabLayout</span> -e -sti <span class="number">1</span> $FTM_Tabs;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_CopyButton;</span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_MoveButton;</span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_SetButton;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	$FTM_WorkSpace = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">	$FTM_WorkSpace = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_WorkSpace`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> -cl;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_Function (<span class="keyword">string</span> $FTM_Function, <span class="keyword">string</span> $FTM_OptionColumn)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">	<span class="keyword">string</span> $FTM_SelectedFiles[] = <span class="keyword">eval</span>($lsCmd + <span class="string">&quot; -sl&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_SelectedFiles`</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">int</span> $wrong = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> $FTM_OperationMode = <span class="string">`radioButtonGrp -q -select ($FTM_OptionColumn + &quot;|FTM_OperationMode&quot;)`</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $FTM_SourceDirectory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $FTM_TargetDirectory = <span class="string">`textFieldButtonGrp -q -text ($FTM_OptionColumn + &quot;|FTM_TargetDirectoryField&quot;)`</span>;</span><br><span class="line">		$FTM_TargetDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_TargetDirectory`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`checkBoxGrp -q -v1 ($FTM_OptionColumn + &quot;|FTM_MakeFolderChecker&quot;)`</span> )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">string</span> $FTM_NewFolderName = <span class="string">`textFieldGrp -q -text ($FTM_OptionColumn + &quot;|FTM_NewFolderNameField&quot;)`</span>;</span><br><span class="line">			$FTM_TargetDirectory = $FTM_TargetDirectory + $FTM_NewFolderName;</span><br><span class="line">			<span class="keyword">if</span> (!<span class="string">`file -q -ex $FTM_TargetDirectory`</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`sysFile -md $FTM_TargetDirectory`</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder created: \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> &#123;</span><br><span class="line">					$wrong = <span class="number">1</span>;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder can not be created: &quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (!<span class="string">`filetest -w $FTM_TargetDirectory`</span>) &#123;</span><br><span class="line">					$wrong = <span class="number">1</span>;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder exists but is not writeable: &quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			$FTM_TargetDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_TargetDirectory`</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">string</span> $FTM_FunctionCmd;</span><br><span class="line">			<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Copy&quot;</span>)</span><br><span class="line">				$FTM_FunctionCmd = <span class="string">&quot;sysFile -cp &quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Move&quot;</span>)</span><br><span class="line">				$FTM_FunctionCmd = <span class="string">&quot;sysFile -mov &quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_SelectedFiles`</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> ($FTM_SelectedFile <span class="keyword">in</span> $FTM_SelectedFiles)</span><br><span class="line">			&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> ($FTM_SelectedFile+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				$wrong = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">								$progress += <span class="number">1</span>;</span><br><span class="line">				$percentage = $progress * (<span class="number">100</span>/<span class="keyword">size</span>($FTM_SelectedFiles));</span><br><span class="line">				<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Handling &quot;</span> + $FTM_SelectedFile + <span class="string">&quot;     ......  &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentFile = <span class="string">`getAttr ($FTM_SelectedFile + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_SourceFile[] = <span class="string">`FTM_GetFile $FTM_CurrentFile`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_OriginSourceFile = $FTM_SourceFile[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_OriginSourceFile) == <span class="number">0</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: File texture is not specified.&quot;</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBoxGrp -q -v1 ($FTM_OptionColumn + &quot;|FTM_ReplaceStringChecker&quot;)`</span> )</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">string</span> $FTM_OldString = <span class="string">`textFieldGrp -q -tx ($FTM_OptionColumn + &quot;|FTM_OldStringField&quot;)`</span>;</span><br><span class="line">						<span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line">							<span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">								$FTM_OldString = <span class="string">`substituteAllString $FTM_OldString $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_MatchExpression = <span class="string">&quot;(&quot;</span> + $FTM_OldString + <span class="string">&quot;)+&quot;</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_NewString = <span class="string">`textFieldGrp -q -tx ($FTM_OptionColumn + &quot;|FTM_NewStringField&quot;)`</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_SourceFile[<span class="number">1</span>]); $i++)</span><br><span class="line">							$FTM_SourceFile[<span class="number">1</span>] = <span class="string">`substitute $FTM_MatchExpression $FTM_SourceFile[1] $FTM_NewString`</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">string</span> $FTM_Prefix;</span><br><span class="line">					<span class="keyword">string</span> $FTM_Suffix;</span><br><span class="line">					<span class="keyword">string</span> $FTM_SourceFileRegularName[] = <span class="string">`FTM_FCFileRegularName $FTM_SourceFile[1]`</span>;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBox -q -v ($FTM_OptionColumn + &quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;)`</span> )</span><br><span class="line">						$FTM_Prefix = <span class="string">`textField -q -tx ($FTM_OptionColumn + &quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBox -q -v ($FTM_OptionColumn + &quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;)`</span> )</span><br><span class="line">						$FTM_Suffix = <span class="string">`textField -q -tx ($FTM_OptionColumn + &quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;)`</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_SourceFileRegularName[<span class="number">1</span>]))</span><br><span class="line">						$FTM_SourceFileRegularName[<span class="number">1</span>] = <span class="string">&quot;.&quot;</span> + $FTM_SourceFileRegularName[<span class="number">1</span>];</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_SourceFileRegularName[<span class="number">2</span>]))</span><br><span class="line">						$FTM_SourceFileRegularName[<span class="number">2</span>] = <span class="string">&quot;.&quot;</span> + $FTM_SourceFileRegularName[<span class="number">2</span>];</span><br><span class="line">					$FTM_SourceFile[<span class="number">1</span>] = $FTM_Prefix + $FTM_SourceFileRegularName[<span class="number">0</span>] + $FTM_Suffix + $FTM_SourceFileRegularName[<span class="number">1</span>] + $FTM_SourceFileRegularName[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">					<span class="keyword">string</span> $FTM_FinalCmd;</span><br><span class="line">					<span class="keyword">string</span> $FTM_FunctionResult;</span><br><span class="line">					<span class="keyword">int</span> $setWrong = <span class="number">0</span>;</span><br><span class="line">					<span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> ($FTM_OperationMode == <span class="number">1</span>)</span><br><span class="line">						&#123;</span><br><span class="line">							$FTM_FinalCmd = $FTM_FunctionCmd + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span> + <span class="string">&quot;\&quot; \&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; $FTM_SourceFile[0] &quot;/&quot;`</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">							$FTM_FunctionResult = $FTM_Function + <span class="string">&quot; \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_SourceFile[0]`</span> + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_OperationMode == <span class="number">2</span>)</span><br><span class="line">						&#123;</span><br><span class="line">							$FTM_SourceDirectory = <span class="string">`textFieldButtonGrp -q -text ($FTM_OptionColumn + &quot;|FTM_SourceDirectoryField&quot;)`</span>;</span><br><span class="line">							$FTM_SourceDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_SourceDirectory`</span>;</span><br><span class="line">							$FTM_FinalCmd = $FTM_FunctionCmd + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span> + <span class="string">&quot;\&quot; \&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_SourceDirectory + $FTM_OriginSourceFile) &quot;/&quot;`</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">							$FTM_FunctionResult = $FTM_Function + <span class="string">&quot; \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_SourceDirectory + $FTM_OriginSourceFile)`</span> + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">string</span> $path = <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span>;</span><br><span class="line">						<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_SelectedFile + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $path + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd))) &#123;</span><br><span class="line">							$FTM_FunctionResult = <span class="string">&quot;Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">							$setWrong = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							$FTM_FunctionResult = <span class="string">&quot;Set to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>) &#123;</span><br><span class="line">						<span class="keyword">if</span> (!<span class="keyword">eval</span>($FTM_FinalCmd)) &#123;</span><br><span class="line">							$wrong = <span class="number">1</span>;</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: &quot;</span> + $FTM_Function + <span class="string">&quot; can NOT be done, could be permission issue or path existence issue.&quot;</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line"></span><br><span class="line">						<span class="keyword">if</span> ( <span class="string">`file -q -ex ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> )</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Move&quot;</span>)</span><br><span class="line">							&#123;</span><br><span class="line">								<span class="keyword">if</span> ( <span class="string">`file -q -ex $FTM_SourceFile[0]`</span> || <span class="string">`file -q -ex ($FTM_SourceDirectory + $FTM_OriginSourceFile)`</span>)</span><br><span class="line">								&#123;</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot; But the original file is not removed. Check the HELP for possible reasons.&quot;</span>;</span><br><span class="line">									FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: &quot;</span> + $FTM_FunctionResult);</span><br><span class="line">								&#125;</span><br><span class="line">								<span class="keyword">else</span></span><br><span class="line">								&#123;</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">									FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span></span><br><span class="line">							&#123;</span><br><span class="line">								$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Set&quot;</span>) &#123;</span><br><span class="line">								<span class="keyword">if</span> ($setWrong)</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;WARNING: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">								<span class="keyword">else</span></span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot;But destination does NOT exist.&quot;</span>;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">								$FTM_FunctionResult = <span class="string">&quot;Fail: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot;Check Help tab for possible reasons.&quot;</span>;</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		FTM_END;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//////构建主UI//////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FileTextureManager ()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//版本检查</span></span><br><span class="line"><span class="keyword">float</span> $verCut = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA, $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">$FTM_NEW_MAYA = <span class="number">0</span>;</span><br><span class="line">$FTM_WIDTH = <span class="number">380</span>;</span><br><span class="line">$FTM_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $verString = <span class="string">`about -v`</span>;</span><br><span class="line"><span class="keyword">string</span> $verString_tmp[];</span><br><span class="line"><span class="keyword">tokenize</span> $verString <span class="string">&quot; &quot;</span> $verString_tmp;</span><br><span class="line"><span class="keyword">float</span> $verNum = $verString_tmp[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> ($verNum &gt; $verCut) &#123; </span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA, $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">	$FTM_NEW_MAYA = <span class="number">1</span>;</span><br><span class="line">	$FTM_WIDTH = <span class="number">520</span>;  <span class="comment">//宽度</span></span><br><span class="line">	$FTM_HEIGHT = <span class="number">700</span>; <span class="comment">//高度</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">$FTM_FCAllFormats = &#123;<span class="string">&quot;iff&quot;</span>,<span class="string">&quot;sgi&quot;</span>,<span class="string">&quot;tga&quot;</span>,<span class="string">&quot;rgb&quot;</span>,<span class="string">&quot;jpg&quot;</span>,<span class="string">&quot;jpeg&quot;</span>,<span class="string">&quot;map&quot;</span>,<span class="string">&quot;tif&quot;</span>,<span class="string">&quot;tiff&quot;</span>,<span class="string">&quot;bmp&quot;</span>,<span class="string">&quot;bw&quot;</span>,<span class="string">&quot;icon&quot;</span>,<span class="string">&quot;cin&quot;</span>,<span class="string">&quot;pic&quot;</span>,<span class="string">&quot;yuv&quot;</span>,<span class="string">&quot;als&quot;</span>,<span class="string">&quot;gif&quot;</span>,<span class="string">&quot;lff&quot;</span>,<span class="string">&quot;pxb&quot;</span>,<span class="string">&quot;scn&quot;</span>,<span class="string">&quot;ppm&quot;</span>,<span class="string">&quot;pri&quot;</span>,<span class="string">&quot;qtl&quot;</span>,<span class="string">&quot;vst&quot;</span>,<span class="string">&quot;rla&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">$lsCmd = <span class="string">&quot;ls -typ file -typ psdFileTex &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> -cl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_MayaWorkSpace;</span><br><span class="line">$FTM_MayaWorkSpace = <span class="string">`workspace -q -dir`</span>;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//确保窗口显示的大小正确</span></span><br><span class="line"><span class="keyword">windowPref</span> -enableAll false;</span><br><span class="line"><span class="comment">//如果UI退出,请将其删除</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">`window -exists FTM_MainWindow`</span>)</span><br><span class="line">	<span class="keyword">deleteUI</span> FTM_MainWindow;</span><br><span class="line"><span class="comment">//建立一个新的用户界面</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">int</span> $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line"><span class="keyword">window</span> -title <span class="string">&quot;File Texture Manager&quot;</span> -wh $FTM_WIDTH $FTM_HEIGHT -tlc <span class="number">200</span> <span class="number">200</span> -ret FTM_MainWindow;</span><br><span class="line">	<span class="keyword">string</span> $FTM_MainForm = <span class="string">`formLayout`</span>;</span><br><span class="line">		<span class="keyword">string</span> $FTM_Tabs = <span class="string">`tabLayout -imw 0 -imh 0`</span>;</span><br><span class="line"><span class="comment">//选项选项卡</span></span><br><span class="line">		<span class="keyword">string</span> $FTM_OptionForm = <span class="string">`formLayout`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_OptionScroll = <span class="string">`scrollLayout -cr true`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_OptionColumn = <span class="string">`columnLayout -adj 1 -rs 5`</span>;</span><br><span class="line"><span class="comment">//分析区域</span></span><br><span class="line">				<span class="keyword">formLayout</span> -nd <span class="number">100</span> FTM_AnalyseForm;</span><br><span class="line">						<span class="keyword">string</span> $FTM_AnalyseColumn = <span class="string">`columnLayout -cat both 30 -adj 1 -rs 5`</span>;</span><br><span class="line">							<span class="keyword">button</span> -l <span class="string">&quot;分析场景文件纹理&quot;</span> -h <span class="number">40</span> -w <span class="number">250</span> FTM_AnalyseButton;</span><br><span class="line">							<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span> -h <span class="number">5</span>;</span><br><span class="line">							<span class="keyword">text</span> -l <span class="string">&quot;选择要管理的文件(多选)&quot;</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_AnalysisScroll = <span class="string">`scrollLayout -p FTM_AnalyseForm`</span>;</span><br><span class="line">							<span class="keyword">string</span> $FTM_AnalysisColumn = <span class="string">`columnLayout -cat left 15`</span>;</span><br><span class="line">								<span class="keyword">text</span> -l <span class="string">&quot;未分析场景文件&quot;</span> FTM_EmptyAnalysisText;</span><br><span class="line">							<span class="keyword">button</span> -e -c (<span class="string">&quot;FTM_AnalyseFileTextures &quot;</span> + $FTM_AnalysisColumn) ($FTM_AnalyseColumn + <span class="string">&quot;|FTM_AnalyseButton&quot;</span>);</span><br><span class="line">				<span class="keyword">formLayout</span> -e</span><br><span class="line">					-af $FTM_AnalyseColumn left <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalyseColumn right <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalyseColumn top <span class="number">5</span></span><br><span class="line">					-af $FTM_AnalyseColumn bottom <span class="number">200</span></span><br><span class="line">					-ac $FTM_AnalysisScroll top <span class="number">5</span> $FTM_AnalyseColumn</span><br><span class="line">					-af $FTM_AnalysisScroll bottom <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalysisScroll left <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalysisScroll right <span class="number">0</span></span><br><span class="line">					($FTM_OptionColumn + <span class="string">&quot;|FTM_AnalyseForm&quot;</span>);</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line"><span class="comment">//操作模式</span></span><br><span class="line">				<span class="keyword">radioButtonGrp</span> -l <span class="string">&quot;工作模式    &quot;</span> -la2 <span class="string">&quot;自动&quot;</span> <span class="string">&quot;手动&quot;</span> -nrb <span class="number">2</span> -<span class="keyword">select</span> <span class="number">1</span> -cl3 right left left -cw3 <span class="number">120</span> <span class="number">100</span> <span class="number">100</span> FTM_OperationMode;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置源目录区域</span></span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -label <span class="string">&quot;源目录&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -buttonLabel <span class="string">&quot;浏览&quot;</span> -adj <span class="number">2</span> -en <span class="number">0</span> -cw <span class="number">1</span> <span class="number">120</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center FTM_SourceDirectoryField;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置目标目录区域</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentProject = <span class="string">`workspace -q -rd`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentSourceImagesDir = $FTM_CurrentProject + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_SourceImages = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_CurrentSourceImagesDir`</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -label <span class="string">&quot;目标目录： &quot;</span> -<span class="keyword">text</span> $FTM_SourceImages -buttonLabel <span class="string">&quot;浏览&quot;</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center FTM_TargetDirectoryField;</span><br><span class="line"><span class="comment">//创建新文件夹区域</span></span><br><span class="line">				<span class="keyword">checkBoxGrp</span> -ncb <span class="number">1</span> -l1 <span class="string">&quot;在目标目录下创建新文件夹&quot;</span> -adj <span class="number">1</span> -v1 <span class="number">0</span> -cat <span class="number">1</span> left <span class="number">101</span> FTM_MakeFolderChecker;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -label <span class="string">&quot;文件夹名称&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;TextureFiles&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">180</span> -cl2 right left FTM_NewFolderNameField;</span><br><span class="line">				<span class="keyword">text</span> -al center -l <span class="string">&quot;FINAL目标目录将等于目标目录&quot;</span>;</span><br><span class="line">				<span class="keyword">text</span> -al center -l <span class="string">&quot;加上新文件夹（如果用户决定创建新文件夹）&quot;</span>;</span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"><span class="comment">//更新纹理文件区域</span></span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">1</span> right <span class="number">0</span> -cl2 left left FTM_AddPrefixRow;</span><br><span class="line">					<span class="keyword">checkBox</span> -l <span class="string">&quot;添加前缀&quot;</span> -v <span class="number">0</span> FTM_AddPrefixChecker;</span><br><span class="line">					<span class="keyword">textField</span> -tx <span class="string">&quot;prefix_&quot;</span> -en <span class="number">0</span> -w <span class="number">150</span> FTM_PrefixField;</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">1</span> right <span class="number">0</span> -cl2 left left FTM_AddSuffixRow;</span><br><span class="line">					<span class="keyword">checkBox</span> -l <span class="string">&quot;添加后缀&quot;</span> -v <span class="number">0</span> FTM_AddSuffixChecker;</span><br><span class="line">					<span class="keyword">textField</span> -tx <span class="string">&quot;_suffix&quot;</span> -en <span class="number">0</span> -w <span class="number">150</span> FTM_SuffixField;</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">checkBoxGrp</span> -ncb <span class="number">1</span> -l1 <span class="string">&quot;替换字符串&quot;</span> -adj <span class="number">1</span> -v1 <span class="number">0</span> -cat <span class="number">1</span> left <span class="number">101</span> FTM_ReplaceStringChecker;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -l <span class="string">&quot;旧名称：&quot;</span> -tx <span class="string">&quot;Old String&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">150</span> -cl2 right left FTM_OldStringField;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -l <span class="string">&quot;新名称：&quot;</span> -tx <span class="string">&quot;New String&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">150</span> -cl2 right left FTM_NewStringField;</span><br><span class="line">		<span class="keyword">formLayout</span> -e</span><br><span class="line">			-af $FTM_OptionScroll top <span class="number">5</span></span><br><span class="line">			-af $FTM_OptionScroll left <span class="number">0</span></span><br><span class="line">			-af $FTM_OptionScroll right <span class="number">0</span></span><br><span class="line">			-af $FTM_OptionScroll bottom <span class="number">0</span></span><br><span class="line">			$FTM_OptionForm;</span><br><span class="line">		<span class="keyword">setParent</span> $FTM_Tabs;</span><br><span class="line"><span class="comment">//附加功能选项卡</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_ExtraFunctionScroll = <span class="string">`scrollLayout -cr true`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_ExtraFunctionColumn = <span class="string">`columnLayout -cat both 15 -adj 1 -rs 5`</span>;</span><br><span class="line">				<span class="comment">//替换路径根区域</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;none&quot;</span> -h <span class="number">5</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;替换根路径&quot;</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -l <span class="string">&quot;根路径&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -buttonLabel <span class="string">&quot;浏览&quot;</span> -adj <span class="number">2</span> -en <span class="number">1</span> -cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center oldRootField;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField \&quot;Choose old root\&quot; 4&quot;</span>) ($FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField&quot;</span>);</span><br><span class="line">				<span class="keyword">string</span> $tmp = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">				$tmp = <span class="string">`FTM_GetPath &quot;path&quot; $tmp`</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -l <span class="string">&quot;新路径&quot;</span> -<span class="keyword">text</span> $tmp -buttonLabel <span class="string">&quot;浏览&quot;</span> -adj <span class="number">2</span> -en <span class="number">1</span> -cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center newRootField;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField \&quot;Choose new root\&quot; 4&quot;</span>) ($FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;替换&quot;</span> -c (<span class="string">&quot;FTM_Substitute &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">				</span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;内存效率 (仅限Maya“文件”节点)&quot;</span>;</span><br><span class="line">				<span class="comment">//text-fn“boldLabelFont”-al left-l“BOT设置(仅限Maya软件渲染器)”；</span></span><br><span class="line">				<span class="keyword">text</span> -al left -l <span class="string">&quot;\&quot;BOT\&quot; 设置(仅限Maya软件渲染器)&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span> -adj <span class="number">3</span></span><br><span class="line">						-cw <span class="number">1</span> <span class="number">170</span> -cw <span class="number">2</span> <span class="number">2</span> -cal <span class="number">3</span> center</span><br><span class="line">						-cat <span class="number">1</span> both <span class="number">0</span> -cat <span class="number">3</span> both <span class="number">0</span></span><br><span class="line">						-rat <span class="number">1</span> bottom <span class="number">0</span> -rat <span class="number">2</span> bottom <span class="number">0</span> -rat <span class="number">3</span> bottom <span class="number">0</span></span><br><span class="line">						FTM_BOTRow;</span><br><span class="line">					<span class="keyword">intFieldGrp</span> -nf <span class="number">1</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">50</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> both <span class="number">5</span> -l <span class="string">&quot;阈值&quot;</span> -el <span class="string">&quot;&quot;</span> -v1 <span class="number">1024</span> FTM_BOTResFieldGrp;</span><br><span class="line">					<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;设置 BOT&quot;</span> -c (<span class="string">&quot;FTM_BOTSetup 1 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;取消设置 BOT&quot;</span> -c (<span class="string">&quot;FTM_BOTSetup 0 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">text</span> -al left -l <span class="string">&quot;\&quot;.map\&quot; 设置（仅限mental ray）&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span> -adj <span class="number">3</span></span><br><span class="line">						-cw <span class="number">1</span> <span class="number">170</span> -cw <span class="number">2</span> <span class="number">2</span> -cal <span class="number">3</span> center</span><br><span class="line">						-cat <span class="number">1</span> both <span class="number">0</span> -cat <span class="number">3</span> both <span class="number">0</span></span><br><span class="line">						-rat <span class="number">1</span> bottom <span class="number">0</span> -rat <span class="number">2</span> bottom <span class="number">0</span> -rat <span class="number">3</span> bottom <span class="number">0</span></span><br><span class="line">						FTM_MAPRow;</span><br><span class="line">					<span class="keyword">intFieldGrp</span> -nf <span class="number">1</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">50</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> both <span class="number">5</span> -l <span class="string">&quot;阈值&quot;</span> -el <span class="string">&quot;&quot;</span> -v1 <span class="number">1024</span> FTM_MAPResFieldGrp;</span><br><span class="line">					<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;设置 .map&quot;</span> -c (<span class="string">&quot;FTM_MAPSetup 1 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;取消设置 .map&quot;</span> -c (<span class="string">&quot;FTM_MAPSetup 0 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="comment">// Filter setup area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;过滤器设置（仅限Maya的“文件”/“sdFileTex”节点）&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">2</span> left <span class="number">30</span> -adj <span class="number">2</span> -cal <span class="number">2</span> center -rat <span class="number">1</span> bottom <span class="number">0</span> FTM_FilterTypeRow;</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;过滤器类型&quot;</span> FTM_FilterTypeMenu;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Off&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Mipmap&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Box&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Quadratic&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Quartic&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Gaussian&quot;</span>;</span><br><span class="line">					<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;Mipmap&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;</span>);</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;设置过滤器类型 &quot;</span> -c (<span class="string">&quot;FTM_FilterSetup &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="comment">// Format conversion area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;纹理文件格式转换&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span>	-cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">80</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> left <span class="number">10</span> -cat <span class="number">3</span> left <span class="number">10</span> -adj <span class="number">2</span> -cal <span class="number">2</span> center FTM_FCRow;</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;源：&quot;</span> FTM_FCSourceMenu;</span><br><span class="line">						<span class="keyword">menuItem</span> -label <span class="string">&quot;\*&quot;</span>;</span><br><span class="line">						<span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($FTM_FCAllFormats);$i++)</span><br><span class="line">							<span class="keyword">menuItem</span> -label $FTM_FCAllFormats[$i];</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;选择匹配项&quot;</span> -c (<span class="string">&quot;select -r `FTM_FCGetMatches \&quot;&quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu\&quot;`;&quot;</span>);</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;转换&quot;</span> FTM_FCTargetMenu;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($FTM_FCAllFormats);$i++)</span><br><span class="line">							<span class="keyword">menuItem</span> -label $FTM_FCAllFormats[$i];</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;处理序列纹理。&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">0</span> FTM_SeqCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;更新路径信息。&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">1</span> FTM_UpdateCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;删除原始纹理。小心使用！&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">0</span> -en <span class="number">1</span> FTM_RemoveCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;checkBox -e -en 1 &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>)</span><br><span class="line">							-ofc (<span class="string">&quot;checkBox -e -en 0 &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>)</span><br><span class="line">							($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_UpdateCheck&quot;</span>);</span><br><span class="line">				<span class="keyword">button</span> -l <span class="string">&quot;转换&quot;</span> -h <span class="number">25</span> -c (<span class="string">&quot;FTM_FCGatherInfo &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">		<span class="keyword">setParent</span> $FTM_Tabs;</span><br><span class="line"><span class="comment">//“帮助”选项卡</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_HelpForm = <span class="string">`formLayout`</span>;</span><br><span class="line"><span class="comment">//描述区域</span></span><br><span class="line">				<span class="keyword">scrollField</span> -ww true -editable false FTM_HelpField;</span><br><span class="line"><span class="comment">//关于文件纹理管理器</span></span><br><span class="line">			<span class="keyword">setParent</span> $FTM_HelpForm;</span><br><span class="line">				<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA;</span><br><span class="line">				<span class="keyword">string</span> $FTM_AboutFrame;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_NEW_MAYA) $FTM_AboutFrame = <span class="string">`frameLayout -l &quot;关于 FileTextureManager&quot; -fn boldLabelFont -cll 0 -bv true  -li 5`</span>;</span><br><span class="line">				<span class="keyword">else</span> $FTM_AboutFrame = <span class="string">`frameLayout -l &quot;关于 FileTextureManager&quot; -la top -fn boldLabelFont -cll 0 -bv true  -li 5`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_AboutForm = <span class="string">`formLayout`</span>;</span><br><span class="line">					<span class="keyword">string</span> $FTM_AboutTextLeft = <span class="string">`text -l &quot;脚本名称 :\n更新时间 :\n作者 :\n汉化 :\n邮箱 :\n\n保留所有权&quot; -al left`</span>;</span><br><span class="line">					<span class="keyword">string</span> $FTM_AboutTextRight = <span class="string">`text -l &quot;FileTextureManager.mel\nMay, 2011\n叶(叶峰)\n三岁豆Er\nCrow.Yeh@gmail.com&quot; -al left`</span>;</span><br><span class="line">				<span class="keyword">formLayout</span> -e</span><br><span class="line">					-af $FTM_AboutTextLeft left <span class="number">10</span></span><br><span class="line">					-af $FTM_AboutTextLeft top <span class="number">5</span></span><br><span class="line">					-an $FTM_AboutTextLeft right</span><br><span class="line">					-af $FTM_AboutTextLeft bottom <span class="number">5</span></span><br><span class="line">					-ac $FTM_AboutTextRight left <span class="number">10</span> $FTM_AboutTextLeft</span><br><span class="line">					-af $FTM_AboutTextRight top <span class="number">5</span></span><br><span class="line">					-an $FTM_AboutTextRight right</span><br><span class="line">					-an $FTM_AboutTextRight bottom</span><br><span class="line">					$FTM_AboutForm;</span><br><span class="line">			<span class="keyword">formLayout</span> -e</span><br><span class="line">				-ac FTM_HelpField bottom <span class="number">5</span> $FTM_AboutFrame</span><br><span class="line">				-af FTM_HelpField top <span class="number">5</span></span><br><span class="line">				-af FTM_HelpField left <span class="number">0</span></span><br><span class="line">				-af FTM_HelpField right <span class="number">0</span></span><br><span class="line">				-an $FTM_AboutFrame top</span><br><span class="line">				-af $FTM_AboutFrame left <span class="number">0</span></span><br><span class="line">				-af $FTM_AboutFrame right <span class="number">0</span></span><br><span class="line">				-af $FTM_AboutFrame bottom <span class="number">0</span></span><br><span class="line">				$FTM_HelpForm;</span><br><span class="line"><span class="comment">//Function form.</span></span><br><span class="line">	<span class="keyword">setParent</span> $FTM_MainForm;</span><br><span class="line">		<span class="keyword">string</span> $FTM_FunctionForm = <span class="string">`formLayout -h 30 -numberOfDivisions 100`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CopyButton = <span class="string">`button -l &quot;复制&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Copy\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_MoveButton = <span class="string">`button -l &quot;剪切&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Move\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_SetButton = <span class="string">`button -l &quot;指定&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Set\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_ResetButton = <span class="string">`button -l &quot;重置&quot; -c (&quot;FTM_ResetUI &quot;+$FTM_OptionColumn+&quot; &quot;+$FTM_AnalysisColumn+&quot; &quot;+$FTM_ExtraFunctionColumn+&quot; &quot;+$FTM_Tabs+&quot; &quot;+$FTM_CopyButton+&quot; &quot;+$FTM_MoveButton+&quot; &quot;+$FTM_SetButton)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CloseButton = <span class="string">`button -l &quot;退出&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;deleteUI FTM_MainWindow; select -cl;global string $FTM_MayaWorkSpace; workspace -dir $FTM_MayaWorkSpace;&quot;)`</span>;</span><br><span class="line">		<span class="keyword">formLayout</span> -e</span><br><span class="line">			-ap $FTM_CopyButton right <span class="number">1</span> <span class="number">20</span></span><br><span class="line">			-af $FTM_CopyButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_CopyButton left <span class="number">0</span></span><br><span class="line">			-af $FTM_CopyButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_MoveButton left <span class="number">1</span> <span class="number">20</span></span><br><span class="line">			-ap $FTM_MoveButton right <span class="number">1</span> <span class="number">40</span></span><br><span class="line">			-af $FTM_MoveButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_MoveButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_SetButton left <span class="number">1</span> <span class="number">40</span></span><br><span class="line">			-ap $FTM_SetButton right <span class="number">1</span> <span class="number">60</span></span><br><span class="line">			-af $FTM_SetButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_SetButton bottom <span class="number">0</span></span><br><span class="line">			-af $FTM_ResetButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_ResetButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_ResetButton left <span class="number">1</span> <span class="number">60</span></span><br><span class="line">			-ap $FTM_ResetButton right <span class="number">1</span> <span class="number">80</span></span><br><span class="line">			-ap $FTM_CloseButton left <span class="number">1</span> <span class="number">80</span></span><br><span class="line">			-af $FTM_CloseButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_CloseButton right <span class="number">0</span></span><br><span class="line">			-af $FTM_CloseButton bottom <span class="number">0</span></span><br><span class="line">			$FTM_FunctionForm;</span><br><span class="line">	<span class="keyword">formLayout</span> -e</span><br><span class="line">		-af $FTM_Tabs top <span class="number">0</span></span><br><span class="line">		-af $FTM_Tabs left <span class="number">0</span></span><br><span class="line">		-af $FTM_Tabs right <span class="number">0</span></span><br><span class="line">		-ac $FTM_Tabs bottom <span class="number">3</span> $FTM_FunctionForm</span><br><span class="line">		-af $FTM_FunctionForm left <span class="number">0</span></span><br><span class="line">		-af $FTM_FunctionForm right <span class="number">0</span></span><br><span class="line">		-af $FTM_FunctionForm bottom <span class="number">0</span></span><br><span class="line">		-an $FTM_FunctionForm top</span><br><span class="line">		$FTM_MainForm;</span><br><span class="line"></span><br><span class="line">FTM_EditUIControl $FTM_OptionColumn $FTM_HelpForm;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $tabCC = <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_CopyButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_MoveButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_SetButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;if (`tabLayout -q -sti &quot;</span> + $FTM_Tabs + <span class="string">&quot;` == 1) &#123;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_CopyButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_MoveButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_SetButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">tabLayout</span> -e -tl $FTM_OptionForm <span class="string">&quot;基本功能&quot;</span> -tl $FTM_ExtraFunctionScroll <span class="string">&quot;附加功能&quot;</span> -tl $FTM_HelpForm <span class="string">&quot;帮助&quot;</span> -psc $tabCC $FTM_Tabs;</span><br><span class="line"><span class="keyword">showWindow</span> FTM_MainWindow;</span><br><span class="line"><span class="comment">//确保其他窗口将以适当的大小显示</span></span><br><span class="line"><span class="keyword">windowPref</span> -enableAll true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FileTextureManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////End//////////////////////////////////</span></span><br></pre></td></tr></table></figure>
<h4 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h4><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Procedure Name :	FileTextureManager</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///	Version :	4.0.4</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Updated :	Aug 27, 2011</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Author :	Crow Yeh (YE Feng)</span></span><br><span class="line"><span class="comment">/// Contact :	crow.yeh@gmail.com</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// History :</span></span><br><span class="line"><span class="comment">///		v4.0.4	Fixed problem of using it in Maya 2010.</span></span><br><span class="line"><span class="comment">///		v4.0.3	Support Maya version up to 2012.</span></span><br><span class="line"><span class="comment">///		v4.0.2	Tiny bugs fixed.</span></span><br><span class="line"><span class="comment">///		v4.0.1	Renamed a variable to avoid potential conflicts.</span></span><br><span class="line"><span class="comment">///		v4.0	Now compatible with Maya 2011</span></span><br><span class="line"><span class="comment">///		v3.4	Tiny bug fix</span></span><br><span class="line"><span class="comment">///		v3.3	Fixed a bug that dselects needed file nodes when user checks</span></span><br><span class="line"><span class="comment">///				checkBoxes not supposed to be checked.</span></span><br><span class="line"><span class="comment">///		v3.2	Fixed a bug that fails to recognise &#x27;\&#x27; as path separator</span></span><br><span class="line"><span class="comment">///				under OS other than Windows.</span></span><br><span class="line"><span class="comment">///				Extra functions now supports mentalray.</span></span><br><span class="line"><span class="comment">///		v3.1	Adds support (only basic functions) for Maya</span></span><br><span class="line"><span class="comment">///				psdFileTex node type and mentalray mentalRayTexture</span></span><br><span class="line"><span class="comment">///				node type.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Description :</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///		File Texture Manager works on Windows/IRIX/Linux/MAC, manages file textures in a handy way.</span></span><br><span class="line"><span class="comment">///		FTM&#x27;s basic functions:</span></span><br><span class="line"><span class="comment">///		1. and give texture existence report.</span></span><br><span class="line"><span class="comment">///		2. Copy or move the original texture files to user defined path (customizable).</span></span><br><span class="line"><span class="comment">///		3. Update file textures&#x27; path info.</span></span><br><span class="line"><span class="comment">///		4. Handle path strings. eg. replace string, add prefix, append suffix...</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///		FTM&#x27;s extra fuctions:</span></span><br><span class="line"><span class="comment">///		1. Substitute file texture&#x27;s path root string. eg. redirecting sourceiamges...</span></span><br><span class="line"><span class="comment">///		2. Memory efficiency setup for textures. (BOT for Maya and .map for mentalray.)</span></span><br><span class="line"><span class="comment">///		3. Filter type batch set.</span></span><br><span class="line"><span class="comment">///		4. Texture file format conversion.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// How to use :</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///		Put the script in your scripts folder then start Maya. Type</span></span><br><span class="line"><span class="comment">///		and execute	&quot;FileTextureManager&quot; in command line or Script</span></span><br><span class="line"><span class="comment">///		Editor, an UI window will appear. Then follow the help in the UI</span></span><br><span class="line"><span class="comment">///		window to finish your job. Have fun!</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Inputs :	None</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Return :	None</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// All Rights Reserved .</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////</span></span><br><span class="line"><span class="comment">// SCRIPT Starts //</span></span><br><span class="line"><span class="comment">///////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Procedure to check selection</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_SelCheck(<span class="keyword">string</span> $nodes[])&#123;</span><br><span class="line"><span class="keyword">int</span> $sel = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($nodes))</span><br><span class="line">	$sel = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;At least one file texture node must be selected!&quot;</span> -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> $sel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Procedure to remind user that job finished.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> FTM_END()&#123;</span><br><span class="line">		<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;Job finished.\nRefer to Script Editor for details.&quot;</span> -ma center -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Procedure to give logs</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> FTM_Log (<span class="keyword">string</span> $type, <span class="keyword">string</span> $node, <span class="keyword">string</span> $log) &#123;</span><br><span class="line"><span class="keyword">string</span> $finLog;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($node))</span><br><span class="line">	$log = $node + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	$log = <span class="string">&quot;\t&quot;</span> + $log + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> ($type) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;start&quot;</span>:</span><br><span class="line">		$finLog = <span class="string">&quot;\n***************************************************************************************************************\n\</span></span><br><span class="line"><span class="string">File Texture Manager Log starts...\n\</span></span><br><span class="line"><span class="string">***************************************************************************************************************\n&quot;</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;end&quot;</span>:</span><br><span class="line">		$finLog = <span class="string">&quot;***************************************************************************************************************\n\</span></span><br><span class="line"><span class="string">File Texture Manager Log ends...\n\</span></span><br><span class="line"><span class="string">***************************************************************************************************************\n&quot;</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		$finLog = $log;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> $finLog;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Get the right format of path(folder) to match current OS.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span> FTM_GetPath (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_OldPath)</span><br><span class="line"><span class="comment">//$FTM_FileOrPath	Input type: file or path</span></span><br><span class="line"><span class="comment">//$FTM_OldPath		The input</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//Do not use &#x27;fromNativePath&#x27; here</span></span><br><span class="line">	<span class="comment">//that only works on Windows!</span></span><br><span class="line">	$FTM_OldPath = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_OldPath &quot;/&quot;`</span>;</span><br><span class="line">	<span class="comment">//Only want the path.</span></span><br><span class="line">	<span class="keyword">if</span> ($FTM_FileOrPath == <span class="string">&quot;file&quot;</span>)</span><br><span class="line">		$FTM_OldPath = <span class="string">`dirname $FTM_OldPath`</span>;</span><br><span class="line">	<span class="comment">//Get rid of the slash at the end.</span></span><br><span class="line">	$FTM_OldPath = <span class="string">`substitute &quot;/*$&quot; $FTM_OldPath &quot;&quot;`</span>;</span><br><span class="line">	<span class="comment">//Get the right path.</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_RightPath;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_OldPath)) $FTM_RightPath = <span class="string">`toNativePath ($FTM_OldPath + &quot;/&quot;)`</span>;</span><br><span class="line">	<span class="keyword">return</span> $FTM_RightPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Get the right format of input file&#x27;s fullname (including path) to match current OS.</span></span><br><span class="line"><span class="comment">// Return a string array, the first element is the right format of the input file&#x27;s</span></span><br><span class="line"><span class="comment">// fullname (including path), the second element is the shortname of input file (without path).</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_GetFile (<span class="keyword">string</span> $FTM_OldFullPath)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">string</span> $FTM_RightPath[];</span><br><span class="line">	<span class="keyword">string</span> $FTM_PathElements[];</span><br><span class="line">	<span class="keyword">int</span> $FTM_PathElementsSize;</span><br><span class="line">	<span class="comment">// fullname</span></span><br><span class="line">	$FTM_OldFullPath = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_OldFullPath &quot;/&quot;`</span>;</span><br><span class="line">	$FTM_RightPath[<span class="number">0</span>] = <span class="string">`toNativePath $FTM_OldFullPath`</span>;</span><br><span class="line">	$FTM_PathElementsSize = <span class="string">`tokenize $FTM_OldFullPath &quot;/&quot; $FTM_PathElements`</span>;</span><br><span class="line">	$FTM_RightPath[<span class="number">1</span>] = $FTM_PathElements[$FTM_PathElementsSize - <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> $FTM_RightPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Analyse all the file texture nodes in current scene.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FileTextureAnalyst ()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// All the file texture nodes maybe point to texture files in different paths(folders).</span></span><br><span class="line"><span class="comment">// Here I use  &quot;group&quot; to indicate different paths , which means there are n &quot;groups&quot; of</span></span><br><span class="line"><span class="comment">// different paths if the file texture nodes point to files in n different paths.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The trick is to have an string array $FTM_Groups[], within which every element has corresponding</span></span><br><span class="line"><span class="comment">// path and nodes pointing to that path are concatenated togather with a &quot;*&quot;, which is not supposed to appear in path or name.</span></span><br><span class="line"><span class="comment">// Every element has a form style of &quot;path*node1*node2*node3...&quot;</span></span><br><span class="line"><span class="comment">// Leave $FTM_Groups[0] for empty path, which means node&#x27;s texture file was not specified.</span></span><br><span class="line"><span class="comment">// Leave $FTM_Groups[1] for files without path, which means only texture file&#x27;s short name was presented but path info was missing.</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// All the file texture nodes found in current scene.</span></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">	<span class="keyword">string</span> $FTM_Files[] = <span class="keyword">eval</span>($lsCmd);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Different groups.</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_Groups[];</span><br><span class="line">	<span class="keyword">int</span> $FTM_GroupsSize;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_Files))&#123;</span><br><span class="line">		$FTM_Groups[<span class="number">0</span>] = <span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>;</span><br><span class="line">		$FTM_Groups[<span class="number">1</span>] = <span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Figure out how many &quot;groups&quot; there are in current scene, and put each file texture node</span></span><br><span class="line">	<span class="comment">// into proper &quot;group&quot;.</span></span><br><span class="line">	<span class="keyword">for</span> ($eachFile <span class="keyword">in</span> $FTM_Files)</span><br><span class="line">	&#123;</span><br><span class="line">		$FTM_GroupsSize = <span class="keyword">size</span>($FTM_Groups);</span><br><span class="line">		<span class="comment">// Get the path of current file texture node</span></span><br><span class="line">		<span class="keyword">string</span> $FTM_CurrentFullPath = substituteAll (<span class="string">&quot;\\\\&quot;</span>, <span class="string">`getAttr ($eachFile + &quot;.fileTextureName&quot;)`</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">		<span class="keyword">string</span> $FTM_CurrentPath = <span class="keyword">dirname</span> ($FTM_CurrentFullPath);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// File texutre was specified.</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_CurrentPath))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// Compare current path to all &quot;groups&quot; have been found. If matches then append current node</span></span><br><span class="line">			<span class="comment">// to current &quot;group&quot; and exist the compare loop immediately.</span></span><br><span class="line">			<span class="comment">// Remember that socket [0] is kept for nodes without texture file specified</span></span><br><span class="line">			<span class="comment">// Remember that socket [1] is kept for nodes with texture file specified but with the path info missing</span></span><br><span class="line">			<span class="keyword">for</span> ($j=<span class="number">2</span>; $j&lt;$FTM_GroupsSize; $j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">string</span> $buffer[];</span><br><span class="line">				<span class="keyword">tokenize</span> $FTM_Groups[$j] <span class="string">&quot;*&quot;</span> $buffer;</span><br><span class="line">				<span class="comment">// Get the path of current &quot;group&quot;.</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_OldPath =  $buffer[<span class="number">0</span>];</span><br><span class="line">				<span class="keyword">string</span> $cmp1 = $FTM_CurrentPath;</span><br><span class="line">				<span class="keyword">string</span> $cmp2 = $FTM_OldPath;</span><br><span class="line">				<span class="comment">// Windows is not case sensitive to path</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`about -nt`</span>) &#123;</span><br><span class="line">					$cmp1 = <span class="keyword">tolower</span>($FTM_CurrentPath);</span><br><span class="line">					$cmp2 = <span class="keyword">tolower</span>($FTM_OldPath);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// Compare current path to all &quot;groups&quot; have been found.</span></span><br><span class="line">				<span class="keyword">if</span> ($cmp1 == $cmp2)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// Append current node to current group</span></span><br><span class="line">					<span class="keyword">string</span> $tmp = $FTM_Groups[$j];</span><br><span class="line">					$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">					$FTM_Groups[$j] = $tmp;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// No &quot;group&quot; matches means new &quot;group&quot; was found.</span></span><br><span class="line">			<span class="keyword">if</span> ($j &gt;= $FTM_GroupsSize)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// Create a new &quot;group&quot; and append current file texure node.</span></span><br><span class="line">				$FTM_Groups[$FTM_GroupsSize] = $FTM_CurrentPath + <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// File texture was specified but the path info was missing</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">size</span>($FTM_CurrentFullPath))&#123;</span><br><span class="line">			<span class="keyword">string</span> $tmp = $FTM_Groups[<span class="number">1</span>];</span><br><span class="line">			$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">			$FTM_Groups[<span class="number">1</span>] = $tmp;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// File texture was not specified yet. Append current node to the first socket of groups</span></span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">string</span> $tmp = $FTM_Groups[<span class="number">0</span>];</span><br><span class="line">			$tmp += <span class="string">&quot;*&quot;</span> + $eachFile;</span><br><span class="line">			$FTM_Groups[<span class="number">0</span>] = $tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> -cl;</span><br><span class="line">	<span class="keyword">return</span> $FTM_Groups;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Edit the UI Controls after they&#x27;ve been built</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> FTM_EditUIControl (<span class="keyword">string</span> $FTM_OptionColumn, <span class="keyword">string</span> $FTM_HelpForm)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// Operation mode</span></span><br><span class="line">	<span class="keyword">radioButtonGrp</span> -e -on1 (<span class="string">&quot;textFieldButtonGrp -e -en 0 -tx \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>)</span><br><span class="line">			-on2 (<span class="string">&quot;textFieldButtonGrp -e -en 1 -tx \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_OperationMode&quot;</span>);</span><br><span class="line"><span class="comment">// Set source directory</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;file\&quot; \&quot;&quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField\&quot; \&quot;Set_S.D.\&quot; 0&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>);</span><br><span class="line"><span class="comment">// Set target directory</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; \&quot;&quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField\&quot; \&quot;Set_T.D.\&quot; 4&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField&quot;</span>);</span><br><span class="line"><span class="comment">// Make new folder</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -on1 (<span class="string">&quot;textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>)</span><br><span class="line">			-of1 (<span class="string">&quot;textFieldGrp -e -en 0 -text \&quot;MyTextureFiles\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_MakeFolderChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Add prefix</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;textField -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>)</span><br><span class="line">			-ofc (<span class="string">&quot;textField -e -en 0 -text \&quot;prefix_\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Add suffix</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;textField -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>)</span><br><span class="line">			-ofc (<span class="string">&quot;textField -e -en 0 -text \&quot;_suffix\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;</span>);</span><br><span class="line"><span class="comment">// Replace string</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -on1 (<span class="string">&quot;textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField; textFieldGrp -e -en 1 -text \&quot;\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>)</span><br><span class="line">			-of1 (<span class="string">&quot;textFieldGrp -e -en 0 -text \&quot;OldString\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField; textFieldGrp -e -en 0 -text \&quot;NewString\&quot; &quot;</span> + $FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>)</span><br><span class="line">			($FTM_OptionColumn + <span class="string">&quot;|FTM_ReplaceStringChecker&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Help description field</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_HelpDescription = <span class="string">&quot;\n[Description]:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  File Texture Manager works on Windows/IRIX/Linux/MAC, manages file textures in a very handy way.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  FTM basic functions:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. 分析场景文件纹理.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. Copy or move the original texture files to user defined path.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. Update file textures&#x27; path.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. Mentalray texture node is supported too.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  FTM extra functions:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. Substitute file texture path&#x27;s root string. eg. redirecting sourceiamges...\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. Memory efficiency setup/unset for file textures according to their resolution. Textures larger than Threshold (in either x or y) will be set to use renderer prefered format (BOT for Maya and .map for mentalray) in setup mode. Corresponding memory-efficient file will be automatically generated if needed. When unset, all textures smaller than threshold in both x and y will be set to use normal textures, from which file the memory efficient texture was generated. BOT unset assume normal texture exist in the same directory. Mentalray .map unset will first check if the normal texture exist. If not, FTM will try to extract one from the .map file. Nodes pointing to sequences will be ignored.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. Set filter type to specified type for selected file nodes.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. Convert texture file format from \&quot;From\&quot; to \&quot;To\&quot; for selected file nodes. If \&quot;From\&quot; is not \&quot;*\&quot;, only file nodes whose texture files format match \&quot;From\&quot; will be handled. For file nodes use image sequence as texture files, the range for conversion need to be specified, so only print out corresponding commands instead of really do the jobs. This function use Maya \&quot;imgcvt\&quot; and mentalray \&quot;imf_copy\&quot; ultility to do the conversion, so make sure them can be found in system executable path.\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;[Work Flow]:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  Step 1. 分析场景文件纹理.(optional)\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  Step 2. Select scene file textures (nodes) you want to manage by checking on the related checkers in the UI. You can also do this by your own method, Eg. select them in Hypershade.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  Step 3. Set options as needed.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  Step 4. Do copy, move or set by pressing related button.\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;[Tips]:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. Always keep 2 different version for each texture file. Eg. \&quot;abc_LowRes.tga\&quot; is in low resolution while \&quot;abc_HighRes.tga\&quot; is in high resolution. Do your job using low-res textures to speed the interactant. Just remember to use FileTextureManager to reset each file texture to point to the related high-res texture before rendering. (Add prefix, add suffix or even replace string.)\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. The FileTextureManager&#x27;s UI does not update dynamically like what Attribute Editor does, so it is better to re-分析场景文件纹理 each time you finish an FTM job. This is not necessary if you do not use the Analyse function at all.\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;[Notes]:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. Final target directory will be equal to target directory plus new folder, if user decide to make a new folder.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. Add suffix function has limitation on the texture file name. To be sure it work as desired, the file name must be in a regular format, Eg. \&quot;filename.ext\&quot;, \&quot;filename.[#...#].ext\&quot;, \&quot;filename.ext.[#...#]\&quot;, etc.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. Add prfix, add suffix and replace string can be executed at the same time to each file texture. Replace string is caculated first, then add suffix, and add prefix last.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  4. It is highly recommended not to contain \&quot;.\&quot; in prefix, suffix, old string and new string.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  5. Sometimes process fails. The reason may be various. The most possible reason could be one of or both the following two: a. Texture file is not found in the source directory; b. Permission denied on reading or writing or deleting.\n\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;[Details]:\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  1. Analysing scene file textures let you know how many file textures there are in the scene, where there are, whether they exist or not, etc. It also allows user select all the texture files point to same path by only one simple click.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  2. How to choose operation mode depends on different source directory status. If file is there where it point to, use Automatic mode, otherwise use Manual mode.\n&quot;</span>;</span><br><span class="line">		$FTM_HelpDescription += <span class="string">&quot;  3. Other functions are pretty definite as marked in the UI.\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">scrollField</span> -e -<span class="keyword">text</span> $FTM_HelpDescription ($FTM_HelpForm + <span class="string">&quot;|FTM_HelpField&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// judge if the input string is format extension, sequence or just part of file basename</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_FCWhatIs(<span class="keyword">string</span> $string)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> $isWhat;</span><br><span class="line"><span class="comment">// 0 - format extension</span></span><br><span class="line"><span class="comment">// 1 - sequence number</span></span><br><span class="line"><span class="comment">// 2 - nothing, is just file basename</span></span><br><span class="line"><span class="comment">// 3 - bot</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">$string = <span class="keyword">tolower</span>($string);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">stringArrayCount</span>($string,$FTM_FCAllFormats))</span><br><span class="line">	$isWhat = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">size</span>(<span class="keyword">match</span>(<span class="string">&quot;[0-9]*&quot;</span>,$string)) == <span class="keyword">size</span>($string))</span><br><span class="line">	$isWhat = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ($string == <span class="string">&quot;bot&quot;</span>)</span><br><span class="line">	$isWhat = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	$isWhat = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $isWhat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// judge texture file format, only according to the possible extension name</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FCFileRegularName(<span class="keyword">string</span> $file)</span><br><span class="line">&#123;</span><br><span class="line">$file = substituteAll (<span class="string">&quot;\\\\&quot;</span>, $file, <span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $fileRegularName[] = <span class="keyword">stringToStringArray</span>(<span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>),<span class="string">&quot;.&quot;</span>);</span><br><span class="line"><span class="comment">// try to make it like below</span></span><br><span class="line"><span class="comment">// [0] - file name</span></span><br><span class="line"><span class="comment">// [1] - the sequency number if presented, or &quot;&quot;</span></span><br><span class="line"><span class="comment">// [2] - the extension if presented, or &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $fileName;</span><br><span class="line"><span class="keyword">string</span> $seqNum;</span><br><span class="line"><span class="keyword">string</span> $fileFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (<span class="keyword">size</span>($fileRegularName))</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// sick!!!</span></span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// only file name presented</span></span><br><span class="line">		$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// the second/last element could be sequence number, format extension or nothing;</span></span><br><span class="line">		<span class="keyword">if</span> (FTM_FCWhatIs($fileRegularName[<span class="number">1</span>]) == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			$fileFormat = $fileRegularName[<span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($fileRegularName[<span class="number">1</span>]) == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			$seqNum = $fileRegularName[<span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">// FTM_FCWhatIs($fileRegularName[1]) = 2, which means the second/last element is just part of file basename, sick!!!</span></span><br><span class="line">			$fileName = <span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>: <span class="comment">// there are 3 or more pieces. consider the last 2 only.</span></span><br><span class="line">		<span class="keyword">string</span> $lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$fileFormat = $lastPiece;</span><br><span class="line">			$fileName = <span class="keyword">basenameEx</span>($file);</span><br><span class="line">			<span class="comment">// strip the last piece to judge again</span></span><br><span class="line">			$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>];</span><br><span class="line">			<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				$seqNum = $lastPiece;</span><br><span class="line">				$fileName = <span class="keyword">basenameEx</span>($fileName);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">			$seqNum = $lastPiece;</span><br><span class="line">			$fileName = <span class="keyword">basenameEx</span>($file);</span><br><span class="line">			<span class="comment">// strip the last piece to judge again</span></span><br><span class="line">			$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>];</span><br><span class="line">			<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				$fileFormat = $lastPiece;</span><br><span class="line">				$fileName = <span class="keyword">basenameEx</span>($fileName);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">3</span>) <span class="comment">//bot</span></span><br><span class="line">			&#123;</span><br><span class="line">			$fileFormat = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-2</span>] + <span class="string">&quot;.bot&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">size</span>($fileRegularName) == <span class="number">3</span>)</span><br><span class="line">				$fileName = $fileRegularName[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">				$lastPiece = $fileRegularName[<span class="keyword">size</span>($fileRegularName)<span class="number">-3</span>];</span><br><span class="line">				<span class="keyword">if</span> (FTM_FCWhatIs($lastPiece) == <span class="number">1</span>)</span><br><span class="line">					&#123;</span><br><span class="line">					$seqNum = $lastPiece;</span><br><span class="line">					$fileName = <span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>($file)));</span><br><span class="line">					&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$fileName = <span class="keyword">basenameEx</span>(<span class="keyword">basenameEx</span>($file));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">// really sick!!!</span></span><br><span class="line">			$fileName = <span class="keyword">basename</span>($file,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">$fileRegularName[<span class="number">0</span>] = $fileName;</span><br><span class="line">$fileRegularName[<span class="number">1</span>] = $seqNum;</span><br><span class="line">$fileRegularName[<span class="number">2</span>] = $fileFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $fileRegularName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// check string $inputString,replace the first (count backwards) matching string $targetPattern with string $newPattern</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">string</span> FTM_FCSubstituteLastPattern(<span class="keyword">string</span> $inputString, <span class="keyword">string</span> $targetPattern, <span class="keyword">string</span> $newPattern)</span><br><span class="line">&#123;</span><br><span class="line">$inputString = substituteAll(<span class="string">&quot;\\\\&quot;</span>, $inputString, <span class="string">&quot;/&quot;</span>);<span class="comment">// avoid to handle &quot;\&quot; in the path</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//strip everything behind the last string $targetPattern&#x27;s existence</span></span><br><span class="line"><span class="keyword">string</span> $exp1 = <span class="string">&quot;^.*&quot;</span> + $targetPattern + <span class="string">&quot;+&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $noTail = <span class="keyword">match</span>($exp1,$inputString);</span><br><span class="line"></span><br><span class="line"><span class="comment">//replace the last $targetPattern in $noTail with $newPattern</span></span><br><span class="line"><span class="keyword">string</span> $exp2 = $targetPattern + <span class="string">&quot;+$&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $newNoEnd = <span class="keyword">substitute</span>($exp2,$noTail,$newPattern);</span><br><span class="line"></span><br><span class="line"><span class="comment">//replace $noTail part in $inputString with $newNoEnd</span></span><br><span class="line"><span class="comment">// substitute all special characters</span></span><br><span class="line"><span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">	$noTail = <span class="string">`substituteAllString $noTail $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line"><span class="keyword">string</span> $exp3 = <span class="string">&quot;^&quot;</span> + $noTail + <span class="string">&quot;+&quot;</span>;<span class="comment">//take care of &quot;\&quot;, so encode string.</span></span><br><span class="line"><span class="keyword">string</span> $outputString = <span class="keyword">substitute</span>($exp3,$inputString,$newNoEnd);</span><br><span class="line"></span><br><span class="line">$outputString = <span class="keyword">toNativePath</span>($outputString);</span><br><span class="line"><span class="keyword">return</span> $outputString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// to analyse the number of digits for input filename</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> <span class="keyword">int</span> FTM_FCDigitsNumber(<span class="keyword">string</span> $fileName)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $fileRegularName[] = FTM_FCFileRegularName($fileName);</span><br><span class="line">$fileName = FTM_FCSubstituteLastPattern($fileName,$fileRegularName[<span class="number">1</span>],<span class="string">&quot;*&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $filesInSeq[] = <span class="string">`getFileList -fs $fileName`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> $digiNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($filesInSeq);$i++)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">string</span> $tmp[] = FTM_FCFileRegularName($filesInSeq[$i]);</span><br><span class="line">	<span class="keyword">if</span> ($digiNum &lt;= <span class="keyword">size</span>($tmp[<span class="number">1</span>]))</span><br><span class="line">		$digiNum = <span class="keyword">size</span>($tmp[<span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $digiNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// the file format converter</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">proc</span> FTM_FCGo(<span class="keyword">int</span> $progressUI, <span class="keyword">string</span> $sourceFormatUI, <span class="keyword">string</span> $targetFormat, <span class="keyword">int</span> $handleSeq, <span class="keyword">int</span> $updatePath, <span class="keyword">int</span> $removeOrig)</span><br><span class="line"><span class="comment">//int $progressUI			- need progress UI; 0 - No UI for progress, which is designed for command line uses.</span></span><br><span class="line"><span class="comment">//string $sourceFormatUI	- format convert from</span></span><br><span class="line"><span class="comment">//string $targetFormat		- format convert to</span></span><br><span class="line"><span class="comment">//int $handleSeq			- handle sequence textures; 0 - do not handle sequence textures.</span></span><br><span class="line"><span class="comment">//int $updatePath			- update path info; 0 - do not update path info.</span></span><br><span class="line"><span class="comment">//int $removeOrig			- remove original textures; 0 - do not remove original textures.</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (FTM_SelCheck(<span class="string">`ls -sl -typ file `</span>)) &#123;<span class="comment">// if (0)</span></span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="comment">// list for file nodes to be handled</span></span><br><span class="line">	<span class="keyword">string</span> $fileNodesList[] = FTM_FCGetMatches($sourceFormatUI);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> $isSeq[];<span class="comment">// if it is using an image sequence as texture</span></span><br><span class="line">	<span class="keyword">int</span> $isOneOfSeq[];<span class="comment">// if it is using only one image of a whole sequence as texture.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $file;<span class="comment">// current file to be converted</span></span><br><span class="line">	<span class="keyword">string</span> $fileFC;<span class="comment">// current file in suitable naming for FC use</span></span><br><span class="line">	<span class="keyword">string</span> $fileUpdatePath;<span class="comment">// current file in suitable naming for updatePath use</span></span><br><span class="line">	<span class="keyword">string</span> $fileRemove;<span class="comment">// current file in proper naming for removing</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// build progress feedback only in UI mode</span></span><br><span class="line">	<span class="keyword">if</span> ($progressUI) &#123;</span><br><span class="line">		<span class="comment">// base of progress feedback setup</span></span><br><span class="line">		<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size($fileNodesList)`</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// executes cooresponding commands for each file node specified.</span></span><br><span class="line">	<span class="comment">// the core process.</span></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($fileNodesList);$i++)&#123; <span class="comment">//for loop (1)</span></span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($fileNodesList[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="comment">// build progress feedback only in UI mode</span></span><br><span class="line">		<span class="keyword">if</span> ($progressUI)&#123;</span><br><span class="line">			<span class="comment">// Check if the dialog has been cancelled</span></span><br><span class="line">			<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$progress = $i+<span class="number">1</span>;</span><br><span class="line">			$percentage = $progress * (<span class="number">100</span>/<span class="keyword">size</span>($fileNodesList));</span><br><span class="line">			<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Handling &quot;</span> + $fileNodesList[$i] + <span class="string">&quot;     ......  &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		$file = <span class="keyword">toNativePath</span>(substituteAll(<span class="string">&quot;\\\\&quot;</span>,<span class="string">`getAttr ($fileNodesList[$i] + &quot;.fileTextureName&quot;)`</span>,<span class="string">&quot;/&quot;</span>));</span><br><span class="line">		$fileFC = $file;</span><br><span class="line">		$fileRemove = $file;</span><br><span class="line">		<span class="keyword">string</span> $fileRegularName[] = FTM_FCFileRegularName($file);</span><br><span class="line">		<span class="keyword">string</span> $isBOT = <span class="string">`match &quot;bot&quot; $fileRegularName[2]`</span>;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">size</span>($isBOT)) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;Texture file is a BOT file. Skipped!&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">string</span> $targetFile = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">2</span>],$targetFormat);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// it is bad that a file has no extension to indicate its format, so add one if needed.</span></span><br><span class="line">		<span class="keyword">if</span> (!<span class="keyword">size</span>($fileRegularName[<span class="number">2</span>]))</span><br><span class="line">			$targetFile += <span class="string">&quot;.&quot;</span> + $targetFormat;</span><br><span class="line">		$fileUpdatePath = $targetFile;</span><br><span class="line">		<span class="keyword">string</span> $cmp1,$cmp2;</span><br><span class="line">		$cmp1 = $fileUpdatePath;</span><br><span class="line">		$cmp2 = $fileRemove;</span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`about -nt`</span>) &#123;</span><br><span class="line">			$cmp1 = <span class="keyword">toNativePath</span>(<span class="keyword">tolower</span>($cmp1));</span><br><span class="line">			$cmp2 = <span class="keyword">toNativePath</span>(<span class="keyword">tolower</span>($cmp2));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// skip all process if the file node was already handled before.</span></span><br><span class="line">		<span class="keyword">if</span>($cmp1 == $cmp2)</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;This file node was already handled before. Process skipped.&quot;</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">else</span>&#123; <span class="comment">//else (1)</span></span><br><span class="line">			$isSeq[$i] = <span class="number">0</span>;</span><br><span class="line">			$isOneOfSeq[$i] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="string">`nodeType $fileNodesList[$i]`</span> == <span class="string">&quot;file&quot;</span> &amp;&amp; <span class="keyword">size</span>($fileRegularName[<span class="number">1</span>])) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`getAttr ($fileNodesList[$i] + &quot;.useFrameExtension&quot;)`</span>)</span><br><span class="line">					$isSeq[$i] = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$isOneOfSeq[$i] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//commands to execute</span></span><br><span class="line">			<span class="keyword">int</span> $isMR_c = <span class="number">0</span>; <span class="comment">//create .map file</span></span><br><span class="line">			<span class="keyword">int</span> $isMR_x = <span class="number">0</span>; <span class="comment">//extract .map file</span></span><br><span class="line">			<span class="keyword">if</span> ($fileRegularName[<span class="number">2</span>] == <span class="string">&quot;map&quot;</span> &amp;&amp; $targetFormat != <span class="string">&quot;map&quot;</span>)</span><br><span class="line">				$isMR_x = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($fileRegularName[<span class="number">2</span>] != <span class="string">&quot;map&quot;</span> &amp;&amp; $targetFormat == <span class="string">&quot;map&quot;</span>)</span><br><span class="line">				$isMR_c = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmdFC = <span class="string">&quot;system(\&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> ($isMR_c)</span><br><span class="line">				$cmdFC += <span class="string">&quot;imf_copy -p -r&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($isMR_x)</span><br><span class="line">				$cmdFC += <span class="string">&quot;imf_copy&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				$cmdFC += <span class="string">&quot;imgcvt -t &quot;</span> + $targetFormat;</span><br><span class="line">			<span class="keyword">string</span> $cmdUpdatePath = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $fileNodesList[$i] + <span class="string">&quot;.fileTextureName &quot;</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmdRemoveOrig = <span class="string">&quot;sysFile -del \&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!$handleSeq &amp;&amp; $isSeq[$i])</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence was not selected to be handled. Skipped.&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> &#123; <span class="comment">//else (2)</span></span><br><span class="line">				<span class="comment">// need to handle sequence textures</span></span><br><span class="line">				<span class="keyword">if</span> ($handleSeq &amp;&amp; $isSeq[$i])&#123;</span><br><span class="line">					<span class="keyword">string</span> $padding = <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">for</span> ($j=<span class="number">0</span>;$j&lt;FTM_FCDigitsNumber($file);$j++)</span><br><span class="line">						$padding += <span class="string">&quot;@&quot;</span>;</span><br><span class="line">					$targetFile = FTM_FCSubstituteLastPattern($targetFile,$fileRegularName[<span class="number">1</span>],$padding);</span><br><span class="line">					$fileFC = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">1</span>],$padding);</span><br><span class="line">					$fileRemove = FTM_FCSubstituteLastPattern($file,$fileRegularName[<span class="number">1</span>],<span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">					<span class="comment">//command for sequence</span></span><br><span class="line">					<span class="keyword">if</span> (!$isMR_c &amp;&amp; !$isMR_x)</span><br><span class="line">						$cmdFC += <span class="string">&quot; -n startIn endIn stepIn -N startOut endOut stepOut&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				$cmdFC += <span class="string">&quot; \\\&quot;&quot;</span> + <span class="keyword">encodeString</span>($fileFC) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + <span class="keyword">encodeString</span>($targetFile) + <span class="string">&quot;\\\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> ($isMR_c || $isMR_x)</span><br><span class="line">					$cmdFC += <span class="string">&quot; &quot;</span> + $targetFormat + <span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					$cmdFC += <span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line">				<span class="comment">// only do the convertion when target file doesn&#x27;t exist,</span></span><br><span class="line">				<span class="comment">// or convertion has been done before for other file node that shares the same texture.</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion skipped. New format texture exists, maybe convertion has been done before.&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span>&#123; <span class="comment">//else (3)</span></span><br><span class="line">					<span class="keyword">if</span> (!$isSeq[$i])&#123;</span><br><span class="line">						<span class="comment">// system feedback</span></span><br><span class="line">						<span class="keyword">string</span> $cmdFCFeedback = <span class="keyword">eval</span>($cmdFC);</span><br><span class="line">						<span class="keyword">if</span> (<span class="keyword">size</span>($cmdFCFeedback))</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $cmdFCFeedback;</span><br><span class="line">						<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Convertion succeeded. Converted from \&quot;&quot;</span> + $fileFC + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + $targetFile + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion failed. Could be file permission problem, disk capacity problem or source texture is of unknown/unsupported format.&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> &#123; <span class="comment">// for sequence, only print out command to execute.</span></span><br><span class="line">						<span class="keyword">if</span> (!$isMR_c &amp;&amp; !$isMR_x)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (format conversion):&quot;</span> + $cmdFC);</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified. Use \&quot;imf_copy\&quot; to convert your tetures. A simple loop might be needed.&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;<span class="comment">// else (3)</span></span><br><span class="line"></span><br><span class="line">				<span class="comment">// need to update path info</span></span><br><span class="line">				<span class="keyword">if</span> ($updatePath) &#123;<span class="comment">// if (1)</span></span><br><span class="line">					$cmdUpdatePath += <span class="string">&quot;\&quot;&quot;</span> + <span class="keyword">encodeString</span>(<span class="keyword">toNativePath</span>($fileUpdatePath)) + <span class="string">&quot;\&quot;;&quot;</span>;</span><br><span class="line">					$cmdRemoveOrig += <span class="keyword">encodeString</span>($fileRemove) + <span class="string">&quot;\&quot;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> (!$isSeq[$i])&#123;<span class="comment">// if (2)</span></span><br><span class="line">						<span class="keyword">if</span> (<span class="string">`file -q -ex $fileUpdatePath`</span>)&#123; <span class="comment">// if (3)</span></span><br><span class="line">							<span class="keyword">if</span>(<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmdUpdatePath))) &#123;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Path updating failed. So Original Texture Removing will not be done even if it was selected to.&quot;</span>;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span> &#123;<span class="comment">// else (3)</span></span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Path updating succeeded. Set to \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($fileUpdatePath)) + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">								<span class="comment">// need to remove old textures</span></span><br><span class="line">								<span class="comment">// only remove old textures when updatePath is selected and updating succeeds</span></span><br><span class="line">								<span class="keyword">if</span> ($removeOrig)&#123; <span class="comment">//if (4)</span></span><br><span class="line">									<span class="keyword">if</span> ($isOneOfSeq[$i])</span><br><span class="line">										FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Only one file of a whole sequence is used as texture, no file in the sequence is supposed to be removed.&quot;</span>;</span><br><span class="line">									<span class="keyword">else</span> <span class="keyword">if</span> (!$isSeq[$i])&#123; <span class="comment">// else if (1)</span></span><br><span class="line">										<span class="keyword">if</span> (!<span class="keyword">eval</span>($cmdRemoveOrig))</span><br><span class="line">											FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Original texture removing failed, could be file permission problem.&quot;</span>;</span><br><span class="line">										<span class="keyword">else</span></span><br><span class="line">											FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Original texture removing succeeded. Removed \&quot;&quot;</span> + $fileRemove + <span class="string">&quot;\&quot;.&quot;</span>);</span><br><span class="line">									&#125; <span class="comment">// else if (1)</span></span><br><span class="line">								&#125; <span class="comment">// if (4)</span></span><br><span class="line">							&#125;<span class="comment">// else (3)</span></span><br><span class="line">						&#125; <span class="comment">// if (3)</span></span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Convertion failed, Path Updating and Original Texture Removing will not be done even if they were selected to.&quot;</span>;</span><br><span class="line">					&#125; <span class="comment">// if (2)</span></span><br><span class="line">					<span class="comment">// for sequence, only print out command to execute</span></span><br><span class="line">					<span class="keyword">else</span> &#123; <span class="comment">//else (4)</span></span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (update path info):&quot;</span> + $cmdUpdatePath);</span><br><span class="line">						<span class="keyword">if</span> ($removeOrig)</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Sequence specified. Command to execute (remove original textures):&quot;</span> + $cmdRemoveOrig);</span><br><span class="line">					&#125;<span class="comment">// else (4)</span></span><br><span class="line">				&#125; <span class="comment">// if (1)</span></span><br><span class="line">			&#125; <span class="comment">//else (2)</span></span><br><span class="line">		&#125; <span class="comment">// else(1)</span></span><br><span class="line">	&#125; <span class="comment">// for loop (1)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// feedback ends</span></span><br><span class="line">	<span class="keyword">if</span> (!<span class="keyword">size</span>($fileNodesList))</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;No texture is of specified format.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// build progress feedback only in UI mode</span></span><br><span class="line">	<span class="keyword">if</span> ($progressUI)&#123;</span><br><span class="line">		<span class="comment">// finish progress feed back</span></span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="comment">// job done</span></span><br><span class="line">		FTM_END;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125; <span class="comment">// if (0)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// analyse all possible file nodes to find out those match user&#x27;s specification</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> <span class="keyword">string</span>[] FTM_FCGetMatches (<span class="keyword">string</span> $formatUI)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $fileNodesList[]; <span class="comment">// list for file nodes to be handled</span></span><br><span class="line"><span class="keyword">string</span> $tmpNodesList[] = <span class="string">`ls -sl -typ file `</span>; <span class="comment">// list for all (selected) file nodes, which need to be analyse.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $tmpNodesList`</span>) &#123;</span><br><span class="line">	<span class="keyword">string</span> $tmpNode; <span class="comment">// each single file node in the list</span></span><br><span class="line">	<span class="keyword">string</span> $tmpFile; <span class="comment">// file that $tmpNode point to.</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $format = <span class="string">`optionMenu -q -v $formatUI`</span>;</span><br><span class="line">	<span class="keyword">if</span> ($format!=<span class="string">&quot;*&quot;</span>) &#123;<span class="comment">// format from specified, so only handle files with that format</span></span><br><span class="line">		<span class="keyword">for</span> ($tmpNode <span class="keyword">in</span> $tmpNodesList)	&#123;</span><br><span class="line">			$tmpFile = <span class="string">`getAttr ($tmpNode + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $tmpFileRegularName[] = FTM_FCFileRegularName($tmpFile);</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">tolower</span>($tmpFileRegularName[<span class="number">2</span>]) == <span class="keyword">tolower</span>($format))<span class="comment">// extension matches, this file node need to be handled</span></span><br><span class="line">				$fileNodesList[<span class="keyword">size</span>($fileNodesList)] = $tmpNode;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">// &quot;*&quot; was selected as format from, which means to handle all (selected) file nodes</span></span><br><span class="line">		$fileNodesList = $tmpNodesList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> $fileNodesList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// info transfer, just to make sure FTM_FCGo can be run in command line.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_FCGatherInfo(<span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $sourceFormatUI = $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu&quot;</span>;</span><br><span class="line"><span class="keyword">string</span> $targetFormat = <span class="string">`optionMenu -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_FCRow|FTM_FCTargetMenu&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $handleSeq = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_SeqCheck&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $updatePath = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_UpdateCheck&quot;)`</span>;</span><br><span class="line"><span class="keyword">int</span> $removeOrig = <span class="string">`checkBox -q -v ($FTM_ExtraFunctionColumn + &quot;|FTM_RemoveCheck&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">FTM_FCGo 	<span class="number">1</span></span><br><span class="line">		$sourceFormatUI</span><br><span class="line">		$targetFormat</span><br><span class="line">		$handleSeq</span><br><span class="line">		$updatePath</span><br><span class="line">		$removeOrig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Command for Filter Setup</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_FilterSetup(<span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $Nodes[] = <span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $Nodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $filterType = <span class="string">`optionMenu -q -sl ($FTM_ExtraFunctionColumn+&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;)`</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">string</span> $filter = <span class="string">`optionMenu -q -v ($FTM_ExtraFunctionColumn+&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $Nodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($Nodes);$i++) &#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($Nodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($Nodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting filter type, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr &quot;</span> + $Nodes[$i] + <span class="string">&quot;.filterType &quot;</span> + $filterType;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd)))</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Attribute \&quot;filterType\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Set filter type to \&quot;&quot;</span> + $filter + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Command for BOT setup</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_BOTSetup(<span class="keyword">int</span> $FTM_BOTMode, <span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line"><span class="comment">//$FTM_BOTMode		-	1 Setup</span></span><br><span class="line"><span class="comment">//					-	0 Unset</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $FTM_FileNodes[]=<span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_FileNodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_FileNodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_FileNodes); $i++)&#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($FTM_FileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($FTM_FileNodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting BOT options, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Do not handle sequence textures</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.useFrameExtension&quot;)`</span>) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified, Skipped!&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $resolution = <span class="string">`intFieldGrp -q -v1 ($FTM_ExtraFunctionColumn + &quot;|FTM_BOTRow|FTM_BOTResFieldGrp&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $xRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeX&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $yRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeY&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($FTM_BOTMode) &#123;<span class="comment">// Setup</span></span><br><span class="line">			<span class="keyword">if</span> ($xRes &gt;= $resolution || $yRes &gt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheBOT = <span class="string">`substitute &quot;(\\.bot)*$&quot; $FTM_File &quot;&quot;`</span> + <span class="string">&quot;.bot&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $BOTCmd = <span class="string">&quot;makebot -c  -r &quot;</span> + $resolution + <span class="string">&quot; -i \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot; -o \&quot;&quot;</span> + $FTM_TheBOT + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($BOTCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT file generation failed. Could be permission issue or the BOT file already exists.&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $cacheCmd = <span class="string">&quot;setAttr &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.useCache 1&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_TheBOT + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cacheCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;useCache\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT setup OK.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is LOWER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;<span class="comment">// Cancel</span></span><br><span class="line">			<span class="keyword">if</span> ($xRes &lt;= $resolution &amp;&amp; $yRes &lt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $cacheCmd = <span class="string">&quot;setAttr &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.useCache 0&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substitute &quot;(\\.bot)*$&quot; $FTM_File &quot;&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cacheCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;useCache\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTexturename\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;BOT cancelled successfully.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is HIGHER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Command for mentalray memory-mapped texture (.map) setup</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_MAPSetup(<span class="keyword">int</span> $FTM_MAPMode, <span class="keyword">string</span> $FTM_ExtraFunctionColumn)</span><br><span class="line"><span class="comment">//$FTM_MAPMode		-	1 Setup</span></span><br><span class="line"><span class="comment">//					-	0 Unset</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $FTM_FileNodes[]=<span class="string">`ls -sl -typ file`</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_FileNodes`</span>) &#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">	FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_FileNodes`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_FileNodes); $i++)&#123;</span><br><span class="line">		FTM_Log <span class="string">&quot;&quot;</span> ($FTM_FileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		$progress = $i;</span><br><span class="line">		$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($FTM_FileNodes);</span><br><span class="line">		<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Setting up mentalray memory-mapped textures, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Do not handle sequence textures</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.useFrameExtension&quot;)`</span>) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Sequence specified, Skipped!&quot;</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $resolution = <span class="string">`intFieldGrp -q -v1 ($FTM_ExtraFunctionColumn + &quot;|FTM_MAPRow|FTM_MAPResFieldGrp&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $xRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeX&quot;)`</span>;</span><br><span class="line">		<span class="keyword">float</span> $yRes = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.outSizeY&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ($FTM_MAPMode) &#123;<span class="comment">// Setup</span></span><br><span class="line">			<span class="keyword">if</span> ($xRes &gt;= $resolution || $yRes &gt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheMAP = <span class="string">`substitute &quot;(\\.map)*$&quot; $FTM_File &quot;&quot;`</span> + <span class="string">&quot;.map&quot;</span>;</span><br><span class="line">				<span class="keyword">string</span> $MAPCmd = <span class="string">&quot;system(\&quot;imf_copy -p -r \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_File`</span>)) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_TheMAP`</span>)) + <span class="string">&quot;\\\&quot; map\&quot;)&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`file -q -ex $FTM_TheMAP`</span>)&#123; <span class="comment">// .map is already there.</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Mentalray memory-mapped texture file \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot; already exists. FTM will directly use it.&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($MAPCmd)))</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture file generation failed. Could be permission issue or &#x27;imf_copy&#x27; can not be found in system executable path.&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_TheMAP + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture setup accomplished.&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is LOWER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;<span class="comment">// Unset</span></span><br><span class="line">			<span class="keyword">if</span> ($xRes &lt;= $resolution &amp;&amp; $yRes &lt;= $resolution) &#123;</span><br><span class="line">				<span class="keyword">string</span> $FTM_File = <span class="string">`getAttr ($FTM_FileNodes[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				$FTM_File = <span class="string">`substituteAll &quot;\\\\&quot; $FTM_File &quot;/&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_TheMAP = $FTM_File;</span><br><span class="line">				$FTM_File = <span class="string">`substitute &quot;(\\.map)*$&quot; $FTM_File &quot;&quot;`</span>;</span><br><span class="line">				<span class="keyword">int</span> $wrong = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span> (!<span class="string">`file -q -ex $FTM_File`</span>)&#123;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Normal texture file \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_File`</span> + <span class="string">&quot;\&quot; doesn&#x27;t exist.&quot;</span>);</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;FTM is trying to extract one (in Maya iff format) from \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">					<span class="keyword">string</span> $UnMAPCmd = <span class="string">&quot;system(\&quot;imf_copy \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_TheMAP`</span>)) + <span class="string">&quot;\\\&quot; \\\&quot;&quot;</span> + (<span class="keyword">encodeString</span>(<span class="string">`toNativePath $FTM_File`</span>)) + <span class="string">&quot;\\\&quot; iff\&quot;)&quot;</span>;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($UnMAPCmd))) &#123;</span><br><span class="line">						$wrong = <span class="number">1</span>;</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: Extracting normal texture file from \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_TheMAP`</span> + <span class="string">&quot;\&quot; failed.&quot;</span>);</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;         Could be permission issue, or &#x27;imf_copy&#x27; can not be found in system executable path, or original .map file is not a mentalray memory-mapped texture file.&quot;</span>;</span><br><span class="line">					&#125; <span class="keyword">else</span></span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Extraction succeed. =&gt; \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_File`</span> + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line">					<span class="keyword">string</span> $pathCmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_FileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $FTM_File + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($pathCmd)))</span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTexturename\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">						FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;Mentalray memory-mapped texture file unset accomplished.&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Resolution \&quot;&quot;</span> + $xRes + <span class="string">&quot;x&quot;</span> + $yRes + <span class="string">&quot;\&quot; is HIGHER than specified threshold, skipped!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	FTM_END;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Command to substitute path root</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_Substitute(<span class="keyword">string</span> $oldRootField, <span class="keyword">string</span> $newRootField)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> $oldRoot = <span class="string">`textFieldButtonGrp -q -text $oldRootField`</span>;</span><br><span class="line">$oldRoot = substituteAll(<span class="string">&quot;\\\\&quot;</span>,$oldRoot,<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">string</span> $newRoot = <span class="string">`textFieldButtonGrp -q -text $newRootField`</span>;</span><br><span class="line">$newRoot = substituteAll(<span class="string">&quot;\\\\&quot;</span>,$newRoot,<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">size</span>($oldRoot)==<span class="number">0</span> || <span class="keyword">size</span>($newRoot)==<span class="number">0</span>)</span><br><span class="line">	<span class="keyword">confirmDialog</span> -t <span class="string">&quot;File Texture Manager&quot;</span> -m <span class="string">&quot;Both the Old Root filed and the New Root field must be filled!&quot;</span> -b <span class="string">&quot;OK&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">string</span> $fileNodes[] = <span class="string">`ls -sl -typ file  -typ psdFileTex`</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`FTM_SelCheck $fileNodes`</span>)&#123;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state <span class="number">1</span>;</span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="comment">// substitute all special characters</span></span><br><span class="line">		<span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line">		<span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">			$oldRoot = <span class="string">`substituteAllString $oldRoot $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">string</span> $node;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $fileNodes`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($fileNodes);$i++) &#123;</span><br><span class="line">			FTM_Log <span class="string">&quot;&quot;</span> ($fileNodes[$i]+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$progress = $i;</span><br><span class="line">			$percentage = $progress * <span class="number">100</span> / <span class="keyword">size</span>($fileNodes);</span><br><span class="line">			<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Redirecting, please wait......      &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">string</span> $old = <span class="string">`getAttr ($fileNodes[$i]+&quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">			$old = <span class="string">`substituteAll &quot;\\\\&quot; $old &quot;/&quot;`</span>;</span><br><span class="line">			<span class="keyword">string</span> $new = <span class="string">`substitute $oldRoot $old $newRoot`</span>;</span><br><span class="line">			<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $fileNodes[$i] + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $new + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd)))</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;Set to \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($new)) + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">			<span class="keyword">if</span> (!<span class="string">`file -q -ex $new`</span>)</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($new)) + <span class="string">&quot;\&quot; doesn&#x27;t exist!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		FTM_END;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> <span class="keyword">string</span> getDirectoryFromTexCheck(<span class="keyword">string</span> $checkLabel)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> ($checkLabel+<span class="string">&quot;/&quot;</span>) FTM_TargetDirectoryField;</span><br><span class="line">	<span class="keyword">return</span> $checkLabel;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Command executed when &quot;分析场景文件纹理&quot; button pressed.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_AnalyseFileTextures (<span class="keyword">string</span> $FTM_ParentUI)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">string</span> $FTM_Groups[] = <span class="string">`FTM_FileTextureAnalyst`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Make sure the corresponding UI uniqe.</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`columnLayout -q -ex ($FTM_ParentUI + &quot;|FTM_AnalysisCheckerColumn&quot;)`</span>)</span><br><span class="line">		<span class="keyword">deleteUI</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_Groups) == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">text</span> -e -l <span class="string">&quot;No file textures found!&quot;</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">text</span> -e -l <span class="string">&quot;Analysis:&quot;</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">setParent</span> $FTM_ParentUI;</span><br><span class="line">		<span class="keyword">columnLayout</span> FTM_AnalysisCheckerColumn;</span><br><span class="line">		<span class="keyword">int</span> $FTM_Groups_Size = <span class="keyword">size</span>($FTM_Groups);</span><br><span class="line">		<span class="keyword">if</span> ($FTM_Groups[<span class="number">0</span>] == <span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>)</span><br><span class="line">			$FTM_Groups_Size -= <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> ($FTM_Groups[<span class="number">1</span>] == <span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>)</span><br><span class="line">			$FTM_Groups_Size -= <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">		<span class="keyword">string</span> $FTM_TotalResults = <span class="string">&quot;Total &quot;</span> + <span class="keyword">size</span>(<span class="keyword">eval</span>($lsCmd)) + <span class="string">&quot; file textures point to &quot;</span> + $FTM_Groups_Size + <span class="string">&quot; (different) path(s) : &quot;</span>;</span><br><span class="line">		<span class="keyword">text</span> -l $FTM_TotalResults;</span><br><span class="line">		<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span> -h <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="comment">// Analyse each file in each &quot;group&quot;.</span></span><br><span class="line">		<span class="keyword">for</span> ($FTM_Group <span class="keyword">in</span> $FTM_Groups)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">string</span> $buffer[];</span><br><span class="line">			<span class="keyword">tokenize</span> $FTM_Group <span class="string">&quot;*&quot;</span> $buffer;</span><br><span class="line">			<span class="keyword">int</span> $FTM_FilesStoredSize = <span class="keyword">size</span> ($buffer)<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentPath = $buffer[<span class="number">0</span>];</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">string</span> $FTM_FileTexturesAnalysis;</span><br><span class="line">			<span class="comment">// File texture not specified yet. In other words, empty file texture nodes.</span></span><br><span class="line">			<span class="keyword">if</span> ($FTM_CurrentPath==<span class="string">&quot;FTM_EmptySocket_FTM&quot;</span> &amp;&amp; $FTM_FilesStoredSize&gt;<span class="number">0</span>)</span><br><span class="line">				$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; texture(s) NOT specified. So they are NOT exist(s).&quot;</span>;</span><br><span class="line">			<span class="comment">// File texture specified, but no path information.</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_CurrentPath==<span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span> &amp;&amp; $FTM_FilesStoredSize&gt;<span class="number">0</span>)</span><br><span class="line">				$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; texture(s) have no path information. So they are NOT exist(s).&quot;</span>;</span><br><span class="line">			<span class="comment">// Normal status.</span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_FilesStoredSize&gt;<span class="number">0</span>)&#123;</span><br><span class="line">					<span class="comment">// Correct the path format for current OS.</span></span><br><span class="line">					$FTM_CurrentPath = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_CurrentPath`</span>;</span><br><span class="line">					$FTM_FileTexturesAnalysis = $FTM_FilesStoredSize + <span class="string">&quot; texture(s) point to \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($FTM_CurrentPath)) + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Queue the names of the files stored in current &quot;group&quot; for later quick selecting.</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentFile[];</span><br><span class="line">			<span class="keyword">string</span> $FTM_CurrentFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="comment">// Strings used to hold files exist or notExist.</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_Exist[] = &#123;&#125;;</span><br><span class="line">			<span class="keyword">int</span> $FTM_ExistSize = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_NotExist[] = &#123;&#125;;</span><br><span class="line">			<span class="keyword">int</span> $FTM_NotExistSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> ($i=<span class="number">1</span>; $i&lt;<span class="keyword">size</span>($buffer); $i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// Store the names of files in current &quot;group&quot;.</span></span><br><span class="line">				$FTM_CurrentFile[$i] = $buffer[$i];</span><br><span class="line">				$FTM_CurrentFiles = $FTM_CurrentFiles + $FTM_CurrentFile[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Check if the file exsist or not, then asign the name to responding variable.</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentFilePath = <span class="string">`getAttr ($FTM_CurrentFile[$i] + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				<span class="keyword">if</span> ( <span class="string">`file -q -ex $FTM_CurrentFilePath`</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					$FTM_Exist[$FTM_ExistSize] = $FTM_CurrentFile[$i];</span><br><span class="line">					$FTM_ExistSize = $FTM_ExistSize + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					$FTM_NotExist[$FTM_NotExistSize] = $FTM_CurrentFile[$i];</span><br><span class="line">					$FTM_NotExistSize = $FTM_NotExistSize + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_FileTexturesAnalysis)) &#123;</span><br><span class="line">					<span class="keyword">string</span> $FTM_MainChecker = <span class="string">`checkBox -l $FTM_FileTexturesAnalysis -al left`</span>;</span><br><span class="line">					<span class="keyword">popupMenu</span> -p $FTM_MainChecker;</span><br><span class="line">					<span class="keyword">string</span> $cmd = <span class="string">&quot;getDirectoryFromTexCheck(\&quot;&quot;</span>+$buffer[<span class="number">0</span>]+<span class="string">&quot;\&quot;)&quot;</span>;</span><br><span class="line">					</span><br><span class="line">					<span class="keyword">menuItem</span> -label <span class="string">&quot;copy&quot;</span> -c $cmd;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FileTexturesAnalysis;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// Only build responding sub-checker for the files have path information.</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_ExistSubChecker;</span><br><span class="line">				<span class="keyword">string</span> $FTM_NotExistSubChecker;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_CurrentPath!=<span class="string">&quot;FTM_EmptySocket_FTM&quot;</span>  &amp;&amp; $FTM_CurrentPath!=<span class="string">&quot;FTM_MissingPathSocket_FTM&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">columnLayout</span> -adj <span class="number">1</span> -cat left <span class="number">30</span>;</span><br><span class="line">						<span class="comment">// A list of exist files, which is used for selection.</span></span><br><span class="line">						<span class="keyword">string</span> $FTM_ExistFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$FTM_ExistSize; $i++)</span><br><span class="line">							$FTM_ExistFiles = $FTM_ExistFiles + $FTM_Exist[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">						$FTM_ExistSubChecker = <span class="string">`checkBox -l ($FTM_ExistSize + &quot; of them exist(s).&quot;) -al left</span></span><br><span class="line"><span class="string">							-onc (&quot;select -add &quot; + $FTM_ExistFiles) -ofc (&quot;if (&quot; + $FTM_ExistSize + &quot; &gt; 0) select -deselect &quot; + $FTM_ExistFiles)`</span>;</span><br><span class="line"></span><br><span class="line">						<span class="comment">// A list of NOT exist files, which is used for selection.</span></span><br><span class="line">						<span class="keyword">string</span> $FTM_NotExistFiles = <span class="string">&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$FTM_NotExistSize; $i++)</span><br><span class="line">							$FTM_NotExistFiles = $FTM_NotExistFiles + $FTM_NotExist[$i] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">						$FTM_NotExistSubChecker = <span class="string">`checkBox -l ($FTM_NotExistSize + &quot; of them NOT exist(s).&quot;) -al left</span></span><br><span class="line"><span class="string">							-onc (&quot;select -add &quot; + $FTM_NotExistFiles) -ofc (&quot;if (&quot; + $FTM_NotExistSize + &quot; &gt; 0) select -deselect &quot; + $FTM_NotExistFiles)`</span>;</span><br><span class="line">					<span class="keyword">setParent</span> ($FTM_ParentUI + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// Main checker&#x27;s onCommand and offCommand should influnce responding subcheckers in this case;</span></span><br><span class="line">					<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;select -add &quot;</span> + $FTM_CurrentFiles + <span class="string">&quot;;checkBox -e -v 1 -vis 0 &quot;</span> + $FTM_ExistSubChecker + <span class="string">&quot;;checkBox -e -v 1 -vis 0 &quot;</span> + $FTM_NotExistSubChecker)</span><br><span class="line">						-ofc (<span class="string">&quot;if (&quot;</span> + $FTM_FilesStoredSize + <span class="string">&quot; &gt; 0) select -deselect &quot;</span> + $FTM_CurrentFiles + <span class="string">&quot;;checkBox -e -v 0 -vis 1 &quot;</span> + $FTM_ExistSubChecker + <span class="string">&quot;;checkBox -e -v 0 -vis 1 &quot;</span> + $FTM_NotExistSubChecker)</span><br><span class="line">						$FTM_MainChecker;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// Main checker&#x27;s onCommand and offCommand should NOT influnce responding subcheckers in this case;</span></span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;select -add &quot;</span> + $FTM_CurrentFiles) -ofc (<span class="string">&quot;if (&quot;</span> + $FTM_FilesStoredSize + <span class="string">&quot; &gt; 0) select -deselect &quot;</span> + $FTM_CurrentFiles) $FTM_MainChecker;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//Comand executed when Browse button pressed.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_BrowseCmd (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_TextField, <span class="keyword">string</span> $FTM_WhichButton, <span class="keyword">int</span> $FTM_BrowseType)</span><br><span class="line"><span class="comment">//$FTM_FileOrPath		Pass to FTM_ChangeTextField</span></span><br><span class="line"><span class="comment">//$FTM_TextField		Pass to FTM_ChangeTextField</span></span><br><span class="line"><span class="comment">//$FTM_WhichButton		Pass to fileBrowser, which will be the label of the dialog</span></span><br><span class="line"><span class="comment">//$FTM_BrowseType		Pass to fileBrowser, which will define to get dialog for file or folder</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_WorkSpace) == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		$FTM_WorkSpace = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -rte &quot;sourceImages&quot;`</span>;</span><br><span class="line">		$FTM_WorkSpace = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_WorkSpace`</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">workspace</span> -dir $FTM_WorkSpace;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA;</span><br><span class="line">	<span class="keyword">if</span> ($FTM_NEW_MAYA) &#123; <span class="comment">// use &#x27;fileDialog2&#x27; for the browser command.</span></span><br><span class="line">		<span class="keyword">if</span> ($FTM_BrowseType == <span class="number">0</span>) $FTM_BrowseType = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_BrowseType == <span class="number">4</span>) $FTM_BrowseType = <span class="number">3</span>;</span><br><span class="line">		<span class="keyword">string</span> $return[] = <span class="string">`fileDialog2 -ds 2 -cap $FTM_WhichButton -dir $FTM_WorkSpace -fm $FTM_BrowseType -okc $FTM_WhichButton -cc &quot;Cancel&quot;`</span>;</span><br><span class="line">		<span class="keyword">string</span> $path = $return[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (!<span class="keyword">size</span>($path)) $path = <span class="string">`textFieldButtonGrp -q -text $FTM_TextField`</span>;</span><br><span class="line">		<span class="keyword">if</span> ($FTM_FileOrPath == <span class="string">&quot;file&quot;</span>) $path += <span class="string">&quot;bugQuickFix&quot;</span>;</span><br><span class="line">		FTM_ChangeTextField $FTM_FileOrPath $FTM_TextField $path <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">string</span> $FTM_Temp = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			$FTM_Temp += <span class="string">&quot;FTM_ChangeTextField &quot;</span>;</span><br><span class="line">			$FTM_Temp += (<span class="string">&quot;\&quot;&quot;</span> + $FTM_FileOrPath + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">			$FTM_Temp += (<span class="string">&quot;\&quot;&quot;</span> + $FTM_TextField + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">		fileBrowser $FTM_Temp $FTM_WhichButton <span class="string">&quot;&quot;</span> $FTM_BrowseType;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//The callback command on fileBrowser.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_ChangeTextField (<span class="keyword">string</span> $FTM_FileOrPath, <span class="keyword">string</span> $FTM_TextField, <span class="keyword">string</span> $FTM_File, <span class="keyword">string</span> $FTM_FileType)</span><br><span class="line"><span class="comment">//$FTM_FileOrPath	How to deal with the input path , will be pass to FTM_GetPath</span></span><br><span class="line"><span class="comment">//$FTM_TextField	The name of the control need to be edited</span></span><br><span class="line"><span class="comment">//$FTM_File			The file specified</span></span><br><span class="line"><span class="comment">//$FTM_FileType		The file type specified</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">string</span> $FTM_Path = <span class="string">`FTM_GetPath $FTM_FileOrPath $FTM_File`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> (<span class="keyword">toNativePath</span>($FTM_Path)) $FTM_TextField;</span><br><span class="line">	<span class="comment">//Close the dialog for IRIX/Linux.</span></span><br><span class="line">	<span class="keyword">string</span> $os = <span class="string">`about -os`</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">gmatch</span>($os, <span class="string">&quot;*irix*&quot;</span>) || <span class="keyword">gmatch</span>($os, <span class="string">&quot;*linux*&quot;</span>))</span><br><span class="line">		<span class="keyword">window</span> -e -vis false projectViewerWindow;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	$FTM_WorkSpace = $FTM_Path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Reset the UI to its initial state.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_ResetUI (<span class="keyword">string</span> $FTM_OptionColumn,<span class="keyword">string</span> $FTM_AnalysisColumn,<span class="keyword">string</span> $FTM_ExtraFunctionColumn,<span class="keyword">string</span> $FTM_Tabs,<span class="keyword">string</span> $FTM_CopyButton,<span class="keyword">string</span> $FTM_MoveButton,<span class="keyword">string</span> $FTM_SetButton)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state on;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// The main window;</span></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">	<span class="keyword">window</span> -e -wh $FTM_WIDTH $FTM_HEIGHT FTM_MainWindow;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Analyse area</span></span><br><span class="line">	<span class="keyword">text</span> -e -l <span class="string">&quot;Not analysed yet.&quot;</span> ($FTM_AnalysisColumn + <span class="string">&quot;|FTM_EmptyAnalysisText&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`columnLayout -q -ex ($FTM_AnalysisColumn + &quot;|FTM_AnalysisCheckerColumn&quot;)`</span>)</span><br><span class="line">		<span class="keyword">deleteUI</span> ($FTM_AnalysisColumn + <span class="string">&quot;|FTM_AnalysisCheckerColumn&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Operation mode</span></span><br><span class="line">	<span class="keyword">radioButtonGrp</span> -e -<span class="keyword">select</span> <span class="number">1</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_OperationMode&quot;</span>);</span><br><span class="line">	<span class="comment">// Source directory field</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_SourceDirectoryField&quot;</span>);</span><br><span class="line">	<span class="comment">// Target directory field</span></span><br><span class="line">	<span class="keyword">string</span> $FTM_CurrentProject = <span class="string">`workspace -q -rd`</span>;</span><br><span class="line">	<span class="keyword">string</span> $FTM_CurrentSourceImagesDir = $FTM_CurrentProject + <span class="string">`workspace -q -rte &quot;sourceImages&quot;`</span>;</span><br><span class="line">	<span class="keyword">string</span> $FTM_SourceImages = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_CurrentSourceImagesDir`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> $FTM_SourceImages ($FTM_OptionColumn + <span class="string">&quot;|FTM_TargetDirectoryField&quot;</span>);</span><br><span class="line">	<span class="comment">// Make new folder area</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -v1 <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_MakeFolderChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;MyTextureFiles&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_NewFolderNameField&quot;</span>);</span><br><span class="line">	<span class="comment">// Add prefix area</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textField</span> -e -<span class="keyword">text</span> <span class="string">&quot;prefix_&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;</span>);</span><br><span class="line">	<span class="comment">// Add suffix area</span></span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textField</span> -e -<span class="keyword">text</span> <span class="string">&quot;_suffix&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;</span>);</span><br><span class="line">	<span class="comment">// Replace string area</span></span><br><span class="line">	<span class="keyword">checkBoxGrp</span> -e -v1 <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_ReplaceStringChecker&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;OldString&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_OldStringField&quot;</span>);</span><br><span class="line">	<span class="keyword">textFieldGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;NewString&quot;</span> -en <span class="number">0</span> ($FTM_OptionColumn + <span class="string">&quot;|FTM_NewStringField&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Extra function tab</span></span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField&quot;</span>);</span><br><span class="line">	<span class="keyword">string</span> $tmp = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -rte &quot;sourceImages&quot;`</span>;</span><br><span class="line">	$tmp = <span class="string">`FTM_GetPath &quot;path&quot; $tmp`</span>;</span><br><span class="line">	<span class="keyword">textFieldButtonGrp</span> -e -<span class="keyword">text</span> $tmp ($FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">	<span class="keyword">intFieldGrp</span> -e -v1 <span class="number">1024</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_BOTRow|FTM_BOTResFieldGrp&quot;</span>);</span><br><span class="line">	<span class="keyword">intFieldGrp</span> -e -v1 <span class="number">1024</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_MAPRow|FTM_MAPResFieldGrp&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;Mipmap&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;\*&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;iff&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCTargetMenu&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_SeqCheck&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">1</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_UpdateCheck&quot;</span>);</span><br><span class="line">	<span class="keyword">checkBox</span> -e -v <span class="number">0</span> -en <span class="number">1</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Return to the first tab</span></span><br><span class="line">	<span class="keyword">tabLayout</span> -e -sti <span class="number">1</span> $FTM_Tabs;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Reset all bottom function buttons</span></span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_CopyButton;</span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_MoveButton;</span><br><span class="line">	<span class="keyword">button</span> -e -en <span class="number">1</span> $FTM_SetButton;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace;</span><br><span class="line">	$FTM_WorkSpace = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -rte &quot;sourceImages&quot;`</span>;</span><br><span class="line">	$FTM_WorkSpace = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_WorkSpace`</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> -cl;</span><br><span class="line">	<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The Copy, Move and Set functions.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FTM_Function (<span class="keyword">string</span> $FTM_Function, <span class="keyword">string</span> $FTM_OptionColumn)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">	<span class="keyword">string</span> $FTM_SelectedFiles[] = <span class="keyword">eval</span>($lsCmd + <span class="string">&quot; -sl&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="string">`FTM_SelCheck $FTM_SelectedFiles`</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state on;</span><br><span class="line">		FTM_Log <span class="string">&quot;start&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">int</span> $wrong = <span class="number">0</span>;</span><br><span class="line">		<span class="comment">// First get elements ready.</span></span><br><span class="line">		<span class="keyword">int</span> $FTM_OperationMode = <span class="string">`radioButtonGrp -q -select ($FTM_OptionColumn + &quot;|FTM_OperationMode&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Source directory.</span></span><br><span class="line">		<span class="keyword">string</span> $FTM_SourceDirectory;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Target directory.</span></span><br><span class="line">		<span class="keyword">string</span> $FTM_TargetDirectory = <span class="string">`textFieldButtonGrp -q -text ($FTM_OptionColumn + &quot;|FTM_TargetDirectoryField&quot;)`</span>;</span><br><span class="line">		$FTM_TargetDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_TargetDirectory`</span>;</span><br><span class="line">		<span class="comment">// Check if new folder needed. If needed, create one only when the folder does not exist.</span></span><br><span class="line">		<span class="keyword">if</span> ( <span class="string">`checkBoxGrp -q -v1 ($FTM_OptionColumn + &quot;|FTM_MakeFolderChecker&quot;)`</span> )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">string</span> $FTM_NewFolderName = <span class="string">`textFieldGrp -q -text ($FTM_OptionColumn + &quot;|FTM_NewFolderNameField&quot;)`</span>;</span><br><span class="line">			$FTM_TargetDirectory = $FTM_TargetDirectory + $FTM_NewFolderName;</span><br><span class="line">			<span class="keyword">if</span> (!<span class="string">`file -q -ex $FTM_TargetDirectory`</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="string">`sysFile -md $FTM_TargetDirectory`</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder created: \&quot;&quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">else</span> &#123;</span><br><span class="line">					$wrong = <span class="number">1</span>;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder can not be created: &quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (!<span class="string">`filetest -w $FTM_TargetDirectory`</span>) &#123;</span><br><span class="line">					$wrong = <span class="number">1</span>;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> (<span class="string">&quot;Folder exists but is not writeable: &quot;</span> + (<span class="keyword">toNativePath</span>($FTM_TargetDirectory)) + <span class="string">&quot;\&quot;.&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			$FTM_TargetDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_TargetDirectory`</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line">			<span class="comment">// Define command for function.</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_FunctionCmd;</span><br><span class="line">			<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Copy&quot;</span>)</span><br><span class="line">				$FTM_FunctionCmd = <span class="string">&quot;sysFile -cp &quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Move&quot;</span>)</span><br><span class="line">				$FTM_FunctionCmd = <span class="string">&quot;sysFile -mov &quot;</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// base of progress feedback setup</span></span><br><span class="line">			<span class="keyword">int</span> $progress = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">int</span> $percentage = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">progressWindow</span> -t <span class="string">&quot;FTM Working...&quot;</span> -pr $progress -ii <span class="number">1</span> -<span class="keyword">min</span> <span class="number">0</span> -<span class="keyword">max</span> <span class="string">`size $FTM_SelectedFiles`</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Execute command of current function for every file texture node selected.</span></span><br><span class="line">			<span class="keyword">for</span> ($FTM_SelectedFile <span class="keyword">in</span> $FTM_SelectedFiles)</span><br><span class="line">			&#123;</span><br><span class="line">				FTM_Log <span class="string">&quot;&quot;</span> ($FTM_SelectedFile+<span class="string">&quot;:&quot;</span>) <span class="string">&quot;&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> ( <span class="string">`progressWindow -q -ic`</span> )&#123;</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;User cancelled.&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				$wrong = <span class="number">0</span>;</span><br><span class="line">				<span class="comment">// Check if the dialog has been cancelled</span></span><br><span class="line">								$progress += <span class="number">1</span>;</span><br><span class="line">				$percentage = $progress * (<span class="number">100</span>/<span class="keyword">size</span>($FTM_SelectedFiles));</span><br><span class="line">				<span class="keyword">progressWindow</span> -e -pr $progress -st (<span class="string">&quot;Handling &quot;</span> + $FTM_SelectedFile + <span class="string">&quot;     ......  &quot;</span> + $percentage + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// start to work</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentFile = <span class="string">`getAttr ($FTM_SelectedFile + &quot;.fileTextureName&quot;)`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_SourceFile[] = <span class="string">`FTM_GetFile $FTM_CurrentFile`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_OriginSourceFile = $FTM_SourceFile[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">				<span class="comment">// The file texture is not specified.</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_OriginSourceFile) == <span class="number">0</span>)</span><br><span class="line">					FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;WARNING: File texture is not specified.&quot;</span>;</span><br><span class="line">				<span class="comment">// The file texture is specified.</span></span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// If replace string was selected, replace the string specified.</span></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBoxGrp -q -v1 ($FTM_OptionColumn + &quot;|FTM_ReplaceStringChecker&quot;)`</span> )</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">string</span> $FTM_OldString = <span class="string">`textFieldGrp -q -tx ($FTM_OptionColumn + &quot;|FTM_OldStringField&quot;)`</span>;</span><br><span class="line">						<span class="keyword">string</span> $badChar[] = &#123;<span class="string">&quot;+&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;$&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>&#125;;</span><br><span class="line">							<span class="keyword">for</span> ($char <span class="keyword">in</span> $badChar)</span><br><span class="line">								$FTM_OldString = <span class="string">`substituteAllString $FTM_OldString $char (&quot;\\&quot;+$char)`</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_MatchExpression = <span class="string">&quot;(&quot;</span> + $FTM_OldString + <span class="string">&quot;)+&quot;</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_NewString = <span class="string">`textFieldGrp -q -tx ($FTM_OptionColumn + &quot;|FTM_NewStringField&quot;)`</span>;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="keyword">size</span>($FTM_SourceFile[<span class="number">1</span>]); $i++)</span><br><span class="line">							$FTM_SourceFile[<span class="number">1</span>] = <span class="string">`substitute $FTM_MatchExpression $FTM_SourceFile[1] $FTM_NewString`</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// Add prefix or(and) append suffix.</span></span><br><span class="line">					<span class="keyword">string</span> $FTM_Prefix;</span><br><span class="line">					<span class="keyword">string</span> $FTM_Suffix;</span><br><span class="line">					<span class="keyword">string</span> $FTM_SourceFileRegularName[] = <span class="string">`FTM_FCFileRegularName $FTM_SourceFile[1]`</span>;</span><br><span class="line">					<span class="comment">// If prefix was set, add it to the file name.</span></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBox -q -v ($FTM_OptionColumn + &quot;|FTM_AddPrefixRow|FTM_AddPrefixChecker&quot;)`</span> )</span><br><span class="line">						$FTM_Prefix = <span class="string">`textField -q -tx ($FTM_OptionColumn + &quot;|FTM_AddPrefixRow|FTM_PrefixField&quot;)`</span>;</span><br><span class="line">					<span class="comment">// If suffix was set, append it to the file name.</span></span><br><span class="line">					<span class="keyword">if</span> ( <span class="string">`checkBox -q -v ($FTM_OptionColumn + &quot;|FTM_AddSuffixRow|FTM_AddSuffixChecker&quot;)`</span> )</span><br><span class="line">						$FTM_Suffix = <span class="string">`textField -q -tx ($FTM_OptionColumn + &quot;|FTM_AddSuffixRow|FTM_SuffixField&quot;)`</span>;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// Assemble the filename</span></span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_SourceFileRegularName[<span class="number">1</span>]))</span><br><span class="line">						$FTM_SourceFileRegularName[<span class="number">1</span>] = <span class="string">&quot;.&quot;</span> + $FTM_SourceFileRegularName[<span class="number">1</span>];</span><br><span class="line">					<span class="keyword">if</span> (<span class="keyword">size</span>($FTM_SourceFileRegularName[<span class="number">2</span>]))</span><br><span class="line">						$FTM_SourceFileRegularName[<span class="number">2</span>] = <span class="string">&quot;.&quot;</span> + $FTM_SourceFileRegularName[<span class="number">2</span>];</span><br><span class="line">					$FTM_SourceFile[<span class="number">1</span>] = $FTM_Prefix + $FTM_SourceFileRegularName[<span class="number">0</span>] + $FTM_Suffix + $FTM_SourceFileRegularName[<span class="number">1</span>] + $FTM_SourceFileRegularName[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">					<span class="comment">// Function process.</span></span><br><span class="line">					<span class="keyword">string</span> $FTM_FinalCmd;</span><br><span class="line">					<span class="keyword">string</span> $FTM_FunctionResult;</span><br><span class="line">					<span class="keyword">int</span> $setWrong = <span class="number">0</span>;</span><br><span class="line">					<span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> ($FTM_OperationMode == <span class="number">1</span>)</span><br><span class="line">						&#123;</span><br><span class="line">							$FTM_FinalCmd = $FTM_FunctionCmd + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span> + <span class="string">&quot;\&quot; \&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; $FTM_SourceFile[0] &quot;/&quot;`</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">							$FTM_FunctionResult = $FTM_Function + <span class="string">&quot; \&quot;&quot;</span> + <span class="string">`toNativePath $FTM_SourceFile[0]`</span> + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_OperationMode == <span class="number">2</span>)</span><br><span class="line">						&#123;</span><br><span class="line">							$FTM_SourceDirectory = <span class="string">`textFieldButtonGrp -q -text ($FTM_OptionColumn + &quot;|FTM_SourceDirectoryField&quot;)`</span>;</span><br><span class="line">							$FTM_SourceDirectory = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_SourceDirectory`</span>;</span><br><span class="line">							$FTM_FinalCmd = $FTM_FunctionCmd + <span class="string">&quot;\&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span> + <span class="string">&quot;\&quot; \&quot;&quot;</span> + <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_SourceDirectory + $FTM_OriginSourceFile) &quot;/&quot;`</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">							$FTM_FunctionResult = $FTM_Function + <span class="string">&quot; \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_SourceDirectory + $FTM_OriginSourceFile)`</span> + <span class="string">&quot;\&quot; to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">string</span> $path = <span class="string">`substituteAll &quot;\\\\&quot; ($FTM_TargetDirectory + $FTM_SourceFile[1]) &quot;/&quot;`</span>;</span><br><span class="line">						<span class="keyword">string</span> $cmd = <span class="string">&quot;setAttr -typ \&quot;string\&quot; &quot;</span> + $FTM_SelectedFile + <span class="string">&quot;.fileTextureName \&quot;&quot;</span> + $path + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">						<span class="keyword">if</span> (<span class="keyword">catchQuiet</span>(<span class="keyword">eval</span>($cmd))) &#123;</span><br><span class="line">							$FTM_FunctionResult = <span class="string">&quot;Attribute \&quot;fileTextureName\&quot; is locked/connected and can NOT be modified!&quot;</span>;</span><br><span class="line">							$setWrong = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">							$FTM_FunctionResult = <span class="string">&quot;Set to \&quot;&quot;</span> + <span class="string">`toNativePath ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> + <span class="string">&quot;\&quot;. &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// Do the function.</span></span><br><span class="line">					<span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>) &#123;</span><br><span class="line">						<span class="keyword">if</span> (!<span class="keyword">eval</span>($FTM_FinalCmd)) &#123;</span><br><span class="line">							$wrong = <span class="number">1</span>;</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: &quot;</span> + $FTM_Function + <span class="string">&quot; can NOT be done, could be permission issue or path existence issue.&quot;</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span> (!$wrong) &#123;</span><br><span class="line">						<span class="comment">// Print the function result.</span></span><br><span class="line">						<span class="keyword">if</span> ( <span class="string">`file -q -ex ($FTM_TargetDirectory + $FTM_SourceFile[1])`</span> )</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Move&quot;</span>)</span><br><span class="line">							&#123;</span><br><span class="line">								<span class="comment">// File copied but not removed -- not actually &quot;move&quot;.</span></span><br><span class="line">								<span class="keyword">if</span> ( <span class="string">`file -q -ex $FTM_SourceFile[0]`</span> || <span class="string">`file -q -ex ($FTM_SourceDirectory + $FTM_OriginSourceFile)`</span>)</span><br><span class="line">								&#123;</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot; But the original file is not removed. Check the HELP for possible reasons.&quot;</span>;</span><br><span class="line">									FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> (<span class="string">&quot;WARNING: &quot;</span> + $FTM_FunctionResult);</span><br><span class="line">								&#125;</span><br><span class="line">								<span class="keyword">else</span></span><br><span class="line">								&#123;</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">									FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span></span><br><span class="line">							&#123;</span><br><span class="line">								$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">								FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span> ($FTM_Function == <span class="string">&quot;Set&quot;</span>) &#123;</span><br><span class="line">								<span class="keyword">if</span> ($setWrong)</span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;WARNING: &quot;</span> + $FTM_FunctionResult;</span><br><span class="line">								<span class="keyword">else</span></span><br><span class="line">									$FTM_FunctionResult = <span class="string">&quot;Succeed: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot;But destination does NOT exist.&quot;</span>;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">else</span> <span class="keyword">if</span> ($FTM_Function != <span class="string">&quot;Set&quot;</span>)</span><br><span class="line">								$FTM_FunctionResult = <span class="string">&quot;Fail: &quot;</span> + $FTM_FunctionResult + <span class="string">&quot;Check Help tab for possible reasons.&quot;</span>;</span><br><span class="line">							FTM_Log <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span> $FTM_FunctionResult;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// finish progress feed back</span></span><br><span class="line">		<span class="keyword">progressWindow</span> -ep;</span><br><span class="line">		<span class="comment">// job done</span></span><br><span class="line">		FTM_Log <span class="string">&quot;end&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">		FTM_END;</span><br><span class="line">		<span class="keyword">waitCursor</span> -state off;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//Build the main UI.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">proc</span> FileTextureManager ()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Version Check</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">float</span> $verCut = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA, $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">$FTM_NEW_MAYA = <span class="number">0</span>;</span><br><span class="line">$FTM_WIDTH = <span class="number">380</span>;</span><br><span class="line">$FTM_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $verString = <span class="string">`about -v`</span>;</span><br><span class="line"><span class="keyword">string</span> $verString_tmp[];</span><br><span class="line"><span class="keyword">tokenize</span> $verString <span class="string">&quot; &quot;</span> $verString_tmp;</span><br><span class="line"><span class="keyword">float</span> $verNum = $verString_tmp[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> ($verNum &gt; $verCut) &#123; <span class="comment">// version newer than 2010</span></span><br><span class="line">	<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA, $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line">	$FTM_NEW_MAYA = <span class="number">1</span>;</span><br><span class="line">	$FTM_WIDTH = <span class="number">520</span>;</span><br><span class="line">	$FTM_HEIGHT = <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// array of formats supported by format conversion function</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">$FTM_FCAllFormats = &#123;<span class="string">&quot;iff&quot;</span>,<span class="string">&quot;sgi&quot;</span>,<span class="string">&quot;tga&quot;</span>,<span class="string">&quot;rgb&quot;</span>,<span class="string">&quot;jpg&quot;</span>,<span class="string">&quot;jpeg&quot;</span>,<span class="string">&quot;map&quot;</span>,<span class="string">&quot;tif&quot;</span>,<span class="string">&quot;tiff&quot;</span>,<span class="string">&quot;bmp&quot;</span>,<span class="string">&quot;bw&quot;</span>,<span class="string">&quot;icon&quot;</span>,<span class="string">&quot;cin&quot;</span>,<span class="string">&quot;pic&quot;</span>,<span class="string">&quot;yuv&quot;</span>,<span class="string">&quot;als&quot;</span>,<span class="string">&quot;gif&quot;</span>,<span class="string">&quot;lff&quot;</span>,<span class="string">&quot;pxb&quot;</span>,<span class="string">&quot;scn&quot;</span>,<span class="string">&quot;ppm&quot;</span>,<span class="string">&quot;pri&quot;</span>,<span class="string">&quot;qtl&quot;</span>,<span class="string">&quot;vst&quot;</span>,<span class="string">&quot;rla&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// cover all file texture nodes including mentalray&#x27;s</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $lsCmd;</span><br><span class="line">$lsCmd = <span class="string">&quot;ls -typ file -typ psdFileTex &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> -cl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_MayaWorkSpace;</span><br><span class="line">$FTM_MayaWorkSpace = <span class="string">`workspace -q -dir`</span>;</span><br><span class="line"><span class="keyword">global</span> <span class="keyword">string</span> $FTM_WorkSpace = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Make sure the window will be displayed in proper size.</span></span><br><span class="line"><span class="keyword">windowPref</span> -enableAll false;</span><br><span class="line"><span class="comment">//If the UI exits , delete it.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">`window -exists FTM_MainWindow`</span>)</span><br><span class="line">	<span class="keyword">deleteUI</span> FTM_MainWindow;</span><br><span class="line"><span class="comment">//Build a new UI.</span></span><br><span class="line"><span class="keyword">global</span> <span class="keyword">int</span> $FTM_WIDTH, $FTM_HEIGHT;</span><br><span class="line"><span class="keyword">window</span> -title <span class="string">&quot;File Texture Manager&quot;</span> -wh $FTM_WIDTH $FTM_HEIGHT -tlc <span class="number">200</span> <span class="number">200</span> -ret FTM_MainWindow;</span><br><span class="line">	<span class="keyword">string</span> $FTM_MainForm = <span class="string">`formLayout`</span>;</span><br><span class="line">		<span class="keyword">string</span> $FTM_Tabs = <span class="string">`tabLayout -imw 0 -imh 0`</span>;</span><br><span class="line"><span class="comment">//Option tab</span></span><br><span class="line">		<span class="keyword">string</span> $FTM_OptionForm = <span class="string">`formLayout`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_OptionScroll = <span class="string">`scrollLayout -cr true`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_OptionColumn = <span class="string">`columnLayout -adj 1 -rs 5`</span>;</span><br><span class="line"><span class="comment">//Analyse area</span></span><br><span class="line">				<span class="keyword">formLayout</span> -nd <span class="number">100</span> FTM_AnalyseForm;</span><br><span class="line">						<span class="keyword">string</span> $FTM_AnalyseColumn = <span class="string">`columnLayout -cat both 30 -adj 1 -rs 5`</span>;</span><br><span class="line">							<span class="keyword">button</span> -l <span class="string">&quot;分析场景文件纹理&quot;</span> -h <span class="number">30</span> -w <span class="number">250</span> FTM_AnalyseButton;</span><br><span class="line">							<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span> -h <span class="number">5</span>;</span><br><span class="line">							<span class="keyword">text</span> -l <span class="string">&quot;Select files you want to manage. &lt;Multi-Selectable&gt;&quot;</span>;</span><br><span class="line">						<span class="keyword">string</span> $FTM_AnalysisScroll = <span class="string">`scrollLayout -p FTM_AnalyseForm`</span>;</span><br><span class="line">							<span class="keyword">string</span> $FTM_AnalysisColumn = <span class="string">`columnLayout -cat left 15`</span>;</span><br><span class="line">								<span class="keyword">text</span> -l <span class="string">&quot;Not analysed yet.&quot;</span> FTM_EmptyAnalysisText;</span><br><span class="line">							<span class="keyword">button</span> -e -c (<span class="string">&quot;FTM_AnalyseFileTextures &quot;</span> + $FTM_AnalysisColumn) ($FTM_AnalyseColumn + <span class="string">&quot;|FTM_AnalyseButton&quot;</span>);</span><br><span class="line">				<span class="keyword">formLayout</span> -e</span><br><span class="line">					-af $FTM_AnalyseColumn left <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalyseColumn right <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalyseColumn top <span class="number">5</span></span><br><span class="line">					-af $FTM_AnalyseColumn bottom <span class="number">200</span></span><br><span class="line">					-ac $FTM_AnalysisScroll top <span class="number">5</span> $FTM_AnalyseColumn</span><br><span class="line">					-af $FTM_AnalysisScroll bottom <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalysisScroll left <span class="number">0</span></span><br><span class="line">					-af $FTM_AnalysisScroll right <span class="number">0</span></span><br><span class="line">					($FTM_OptionColumn + <span class="string">&quot;|FTM_AnalyseForm&quot;</span>);</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line"><span class="comment">//Operation mode</span></span><br><span class="line">				<span class="keyword">radioButtonGrp</span> -l <span class="string">&quot;Operation Mode&quot;</span> -la2 <span class="string">&quot;Automatic&quot;</span> <span class="string">&quot;Manual&quot;</span> -nrb <span class="number">2</span> -<span class="keyword">select</span> <span class="number">1</span> -cl3 right left left -cw3 <span class="number">120</span> <span class="number">100</span> <span class="number">100</span> FTM_OperationMode;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Set source directory area</span></span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -label <span class="string">&quot;Source Directory&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -buttonLabel <span class="string">&quot;Browse...&quot;</span> -adj <span class="number">2</span> -en <span class="number">0</span> -cw <span class="number">1</span> <span class="number">120</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center FTM_SourceDirectoryField;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Set target directory area</span></span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentProject = <span class="string">`workspace -q -rd`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_CurrentSourceImagesDir = $FTM_CurrentProject + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_SourceImages = <span class="string">`FTM_GetPath &quot;path&quot; $FTM_CurrentSourceImagesDir`</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -label <span class="string">&quot;Target Directory&quot;</span> -<span class="keyword">text</span> $FTM_SourceImages -buttonLabel <span class="string">&quot;Browse...&quot;</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center FTM_TargetDirectoryField;</span><br><span class="line"><span class="comment">//Create new folder area</span></span><br><span class="line">				<span class="keyword">checkBoxGrp</span> -ncb <span class="number">1</span> -l1 <span class="string">&quot;Make New Folder Under Target Directory&quot;</span> -adj <span class="number">1</span> -v1 <span class="number">0</span> -cat <span class="number">1</span> left <span class="number">101</span> FTM_MakeFolderChecker;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -label <span class="string">&quot;Folder Name&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;MyTextureFiles&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">180</span> -cl2 right left FTM_NewFolderNameField;</span><br><span class="line">				<span class="keyword">text</span> -al center -l <span class="string">&quot;The FINAL target directory will be equal to target directory&quot;</span>;</span><br><span class="line">				<span class="keyword">text</span> -al center -l <span class="string">&quot;plus the new folder if user decide to make a new folder&quot;</span>;</span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">5</span>;</span><br><span class="line"><span class="comment">//Update texture file area</span></span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">1</span> right <span class="number">0</span> -cl2 left left FTM_AddPrefixRow;</span><br><span class="line">					<span class="keyword">checkBox</span> -l <span class="string">&quot;Add Prefix&quot;</span> -v <span class="number">0</span> FTM_AddPrefixChecker;</span><br><span class="line">					<span class="keyword">textField</span> -tx <span class="string">&quot;prefix_&quot;</span> -en <span class="number">0</span> -w <span class="number">150</span> FTM_PrefixField;</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">1</span> right <span class="number">0</span> -cl2 left left FTM_AddSuffixRow;</span><br><span class="line">					<span class="keyword">checkBox</span> -l <span class="string">&quot;Add Suffix&quot;</span> -v <span class="number">0</span> FTM_AddSuffixChecker;</span><br><span class="line">					<span class="keyword">textField</span> -tx <span class="string">&quot;_suffix&quot;</span> -en <span class="number">0</span> -w <span class="number">150</span> FTM_SuffixField;</span><br><span class="line">			<span class="keyword">setParent</span> $FTM_OptionColumn;</span><br><span class="line">				<span class="keyword">checkBoxGrp</span> -ncb <span class="number">1</span> -l1 <span class="string">&quot;Replace String&quot;</span> -adj <span class="number">1</span> -v1 <span class="number">0</span> -cat <span class="number">1</span> left <span class="number">101</span> FTM_ReplaceStringChecker;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -l <span class="string">&quot;Old String&quot;</span> -tx <span class="string">&quot;OldString&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">150</span> -cl2 right left FTM_OldStringField;</span><br><span class="line">				<span class="keyword">textFieldGrp</span> -l <span class="string">&quot;New String&quot;</span> -tx <span class="string">&quot;NewString&quot;</span> -en <span class="number">0</span> -cw2 <span class="number">120</span> <span class="number">150</span> -cl2 right left FTM_NewStringField;</span><br><span class="line">		<span class="keyword">formLayout</span> -e</span><br><span class="line">			-af $FTM_OptionScroll top <span class="number">5</span></span><br><span class="line">			-af $FTM_OptionScroll left <span class="number">0</span></span><br><span class="line">			-af $FTM_OptionScroll right <span class="number">0</span></span><br><span class="line">			-af $FTM_OptionScroll bottom <span class="number">0</span></span><br><span class="line">			$FTM_OptionForm;</span><br><span class="line">		<span class="keyword">setParent</span> $FTM_Tabs;</span><br><span class="line"><span class="comment">//Extra function tab</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_ExtraFunctionScroll = <span class="string">`scrollLayout -cr true`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_ExtraFunctionColumn = <span class="string">`columnLayout -cat both 15 -adj 1 -rs 5`</span>;</span><br><span class="line">				<span class="comment">// Substitute path root area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;none&quot;</span> -h <span class="number">5</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;Substitute path root&quot;</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -l <span class="string">&quot;Old Root&quot;</span> -<span class="keyword">text</span> <span class="string">&quot;&quot;</span> -buttonLabel <span class="string">&quot;Browse...&quot;</span> -adj <span class="number">2</span> -en <span class="number">1</span> -cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center oldRootField;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField \&quot;Choose old root\&quot; 4&quot;</span>) ($FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField&quot;</span>);</span><br><span class="line">				<span class="keyword">string</span> $tmp = <span class="string">`workspace -q -rd`</span> + <span class="string">`workspace -q -fileRuleEntry &quot;sourceImages&quot;`</span>;</span><br><span class="line">				$tmp = <span class="string">`FTM_GetPath &quot;path&quot; $tmp`</span>;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -l <span class="string">&quot;New Root&quot;</span> -<span class="keyword">text</span> $tmp -buttonLabel <span class="string">&quot;Browse...&quot;</span> -adj <span class="number">2</span> -en <span class="number">1</span> -cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">60</span> -cl3 right left center newRootField;</span><br><span class="line">				<span class="keyword">textFieldButtonGrp</span> -e -bc (<span class="string">&quot;FTM_BrowseCmd \&quot;path\&quot; &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField \&quot;Choose new root\&quot; 4&quot;</span>) ($FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Substitute&quot;</span> -c (<span class="string">&quot;FTM_Substitute &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|oldRootField &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|newRootField&quot;</span>);</span><br><span class="line">				<span class="comment">// BOT setup area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;Memory Efficiency (Maya &#x27;file&#x27; nodes only)&quot;</span>;</span><br><span class="line">				<span class="comment">//text -fn &quot;boldLabelFont&quot; -al left -l &quot;BOT Setup (Maya sw renderer only)&quot;;</span></span><br><span class="line">				<span class="keyword">text</span> -al left -l <span class="string">&quot;\&quot;BOT\&quot; Setup (Maya sw renderer only)&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span> -adj <span class="number">3</span></span><br><span class="line">						-cw <span class="number">1</span> <span class="number">170</span> -cw <span class="number">2</span> <span class="number">2</span> -cal <span class="number">3</span> center</span><br><span class="line">						-cat <span class="number">1</span> both <span class="number">0</span> -cat <span class="number">3</span> both <span class="number">0</span></span><br><span class="line">						-rat <span class="number">1</span> bottom <span class="number">0</span> -rat <span class="number">2</span> bottom <span class="number">0</span> -rat <span class="number">3</span> bottom <span class="number">0</span></span><br><span class="line">						FTM_BOTRow;</span><br><span class="line">					<span class="keyword">intFieldGrp</span> -nf <span class="number">1</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">50</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> both <span class="number">5</span> -l <span class="string">&quot;Threshold&quot;</span> -el <span class="string">&quot;&quot;</span> -v1 <span class="number">1024</span> FTM_BOTResFieldGrp;</span><br><span class="line">					<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Setup BOT&quot;</span> -c (<span class="string">&quot;FTM_BOTSetup 1 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Unset BOT&quot;</span> -c (<span class="string">&quot;FTM_BOTSetup 0 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">text</span> -al left -l <span class="string">&quot;\&quot;.map\&quot; Setup (mentalray only)&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span> -adj <span class="number">3</span></span><br><span class="line">						-cw <span class="number">1</span> <span class="number">170</span> -cw <span class="number">2</span> <span class="number">2</span> -cal <span class="number">3</span> center</span><br><span class="line">						-cat <span class="number">1</span> both <span class="number">0</span> -cat <span class="number">3</span> both <span class="number">0</span></span><br><span class="line">						-rat <span class="number">1</span> bottom <span class="number">0</span> -rat <span class="number">2</span> bottom <span class="number">0</span> -rat <span class="number">3</span> bottom <span class="number">0</span></span><br><span class="line">						FTM_MAPRow;</span><br><span class="line">					<span class="keyword">intFieldGrp</span> -nf <span class="number">1</span> -adj <span class="number">2</span> -cw <span class="number">1</span> <span class="number">50</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> both <span class="number">5</span> -l <span class="string">&quot;Threshold&quot;</span> -el <span class="string">&quot;&quot;</span> -v1 <span class="number">1024</span> FTM_MAPResFieldGrp;</span><br><span class="line">					<span class="keyword">text</span> -l <span class="string">&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Setup .map&quot;</span> -c (<span class="string">&quot;FTM_MAPSetup 1 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Unset .map&quot;</span> -c (<span class="string">&quot;FTM_MAPSetup 0 &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="comment">// Filter setup area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;Filter setup (Maya &#x27;file&#x27;/&#x27;psdFileTex&#x27; nodes only)&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">2</span> -cw <span class="number">1</span> <span class="number">120</span> -cat <span class="number">2</span> left <span class="number">30</span> -adj <span class="number">2</span> -cal <span class="number">2</span> center -rat <span class="number">1</span> bottom <span class="number">0</span> FTM_FilterTypeRow;</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;Filter Type&quot;</span> FTM_FilterTypeMenu;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Off&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Mipmap&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Box&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Quadratic&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Quartic&quot;</span>;</span><br><span class="line">							<span class="keyword">menuItem</span> -label <span class="string">&quot;Gaussian&quot;</span>;</span><br><span class="line">					<span class="keyword">optionMenu</span> -e -v <span class="string">&quot;Mipmap&quot;</span> ($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FilterTypeRow|FTM_FilterTypeMenu&quot;</span>);</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Set Filter Type&quot;</span> -c (<span class="string">&quot;FTM_FilterSetup &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="comment">// Format conversion area</span></span><br><span class="line">				<span class="keyword">separator</span> -style <span class="string">&quot;in&quot;</span> -h <span class="number">10</span>;</span><br><span class="line">				<span class="keyword">text</span> -fn <span class="string">&quot;boldLabelFont&quot;</span> -al left -l <span class="string">&quot;Texture file format conversion&quot;</span>;</span><br><span class="line">				<span class="keyword">rowLayout</span> -nc <span class="number">3</span>	-cw <span class="number">1</span> <span class="number">80</span> -cw <span class="number">3</span> <span class="number">80</span> -cat <span class="number">1</span> left <span class="number">0</span> -cat <span class="number">2</span> left <span class="number">10</span> -cat <span class="number">3</span> left <span class="number">10</span> -adj <span class="number">2</span> -cal <span class="number">2</span> center FTM_FCRow;</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;From&quot;</span> FTM_FCSourceMenu;</span><br><span class="line">						<span class="keyword">menuItem</span> -label <span class="string">&quot;\*&quot;</span>;</span><br><span class="line">						<span class="keyword">global</span> <span class="keyword">string</span> $FTM_FCAllFormats[];</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($FTM_FCAllFormats);$i++)</span><br><span class="line">							<span class="keyword">menuItem</span> -label $FTM_FCAllFormats[$i];</span><br><span class="line">					<span class="keyword">button</span> -h <span class="number">25</span> -l <span class="string">&quot;Select Matches&quot;</span> -c (<span class="string">&quot;select -r `FTM_FCGetMatches \&quot;&quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_FCRow|FTM_FCSourceMenu\&quot;`;&quot;</span>);</span><br><span class="line">					<span class="keyword">optionMenu</span> -l <span class="string">&quot;To&quot;</span> FTM_FCTargetMenu;</span><br><span class="line">						<span class="keyword">for</span> ($i=<span class="number">0</span>;$i&lt;<span class="keyword">size</span>($FTM_FCAllFormats);$i++)</span><br><span class="line">							<span class="keyword">menuItem</span> -label $FTM_FCAllFormats[$i];</span><br><span class="line">				<span class="keyword">setParent</span> ..;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;Handle sequence textures.&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">0</span> FTM_SeqCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;Update path info.&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">1</span> FTM_UpdateCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -l <span class="string">&quot;Remove original textures. Use with caution!&quot;</span> -al <span class="string">&quot;left&quot;</span> -v <span class="number">0</span> -en <span class="number">1</span> FTM_RemoveCheck;</span><br><span class="line">				<span class="keyword">checkBox</span> -e -onc (<span class="string">&quot;checkBox -e -en 1 &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>)</span><br><span class="line">							-ofc (<span class="string">&quot;checkBox -e -en 0 &quot;</span> + $FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_RemoveCheck&quot;</span>)</span><br><span class="line">							($FTM_ExtraFunctionColumn + <span class="string">&quot;|FTM_UpdateCheck&quot;</span>);</span><br><span class="line">				<span class="keyword">button</span> -l <span class="string">&quot;Convert&quot;</span> -h <span class="number">25</span> -c (<span class="string">&quot;FTM_FCGatherInfo &quot;</span> + $FTM_ExtraFunctionColumn);</span><br><span class="line">		<span class="keyword">setParent</span> $FTM_Tabs;</span><br><span class="line"><span class="comment">//Help tab</span></span><br><span class="line">			<span class="keyword">string</span> $FTM_HelpForm = <span class="string">`formLayout`</span>;</span><br><span class="line"><span class="comment">//Description area</span></span><br><span class="line">				<span class="keyword">scrollField</span> -ww true -editable false FTM_HelpField;</span><br><span class="line"><span class="comment">//About FileTextureManager</span></span><br><span class="line">			<span class="keyword">setParent</span> $FTM_HelpForm;</span><br><span class="line">				<span class="keyword">global</span> <span class="keyword">int</span> $FTM_NEW_MAYA;</span><br><span class="line">				<span class="keyword">string</span> $FTM_AboutFrame;</span><br><span class="line">				<span class="keyword">if</span> ($FTM_NEW_MAYA) $FTM_AboutFrame = <span class="string">`frameLayout -l &quot;About FileTextureManager&quot; -fn boldLabelFont -cll 0 -bv true  -li 5`</span>;</span><br><span class="line">				<span class="keyword">else</span> $FTM_AboutFrame = <span class="string">`frameLayout -l &quot;About FileTextureManager&quot; -la top -fn boldLabelFont -cll 0 -bv true  -li 5`</span>;</span><br><span class="line">				<span class="keyword">string</span> $FTM_AboutForm = <span class="string">`formLayout`</span>;</span><br><span class="line">					<span class="keyword">string</span> $FTM_AboutTextLeft = <span class="string">`text -l &quot;Script Name :\nUpdated :\nAuthor :\nContact :\n\nAll  Rights  Reserved.&quot; -al left`</span>;</span><br><span class="line">					<span class="keyword">string</span> $FTM_AboutTextRight = <span class="string">`text -l &quot;FileTextureManager.mel\nMay, 2011\nCrow Yeh ( YE Feng )\nCrow.Yeh@gmail.com&quot; -al left`</span>;</span><br><span class="line">				<span class="keyword">formLayout</span> -e</span><br><span class="line">					-af $FTM_AboutTextLeft left <span class="number">10</span></span><br><span class="line">					-af $FTM_AboutTextLeft top <span class="number">5</span></span><br><span class="line">					-an $FTM_AboutTextLeft right</span><br><span class="line">					-af $FTM_AboutTextLeft bottom <span class="number">5</span></span><br><span class="line">					-ac $FTM_AboutTextRight left <span class="number">10</span> $FTM_AboutTextLeft</span><br><span class="line">					-af $FTM_AboutTextRight top <span class="number">5</span></span><br><span class="line">					-an $FTM_AboutTextRight right</span><br><span class="line">					-an $FTM_AboutTextRight bottom</span><br><span class="line">					$FTM_AboutForm;</span><br><span class="line">			<span class="keyword">formLayout</span> -e</span><br><span class="line">				-ac FTM_HelpField bottom <span class="number">5</span> $FTM_AboutFrame</span><br><span class="line">				-af FTM_HelpField top <span class="number">5</span></span><br><span class="line">				-af FTM_HelpField left <span class="number">0</span></span><br><span class="line">				-af FTM_HelpField right <span class="number">0</span></span><br><span class="line">				-an $FTM_AboutFrame top</span><br><span class="line">				-af $FTM_AboutFrame left <span class="number">0</span></span><br><span class="line">				-af $FTM_AboutFrame right <span class="number">0</span></span><br><span class="line">				-af $FTM_AboutFrame bottom <span class="number">0</span></span><br><span class="line">				$FTM_HelpForm;</span><br><span class="line"><span class="comment">//Function form.</span></span><br><span class="line">	<span class="keyword">setParent</span> $FTM_MainForm;</span><br><span class="line">		<span class="keyword">string</span> $FTM_FunctionForm = <span class="string">`formLayout -h 30 -numberOfDivisions 100`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CopyButton = <span class="string">`button -l &quot;复制&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Copy\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_MoveButton = <span class="string">`button -l &quot;剪切&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Move\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_SetButton = <span class="string">`button -l &quot;指定&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;FTM_Function \&quot;Set\&quot; &quot; + $FTM_OptionColumn)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_ResetButton = <span class="string">`button -l &quot;重置FTM&quot; -c (&quot;FTM_ResetUI &quot;+$FTM_OptionColumn+&quot; &quot;+$FTM_AnalysisColumn+&quot; &quot;+$FTM_ExtraFunctionColumn+&quot; &quot;+$FTM_Tabs+&quot; &quot;+$FTM_CopyButton+&quot; &quot;+$FTM_MoveButton+&quot; &quot;+$FTM_SetButton)`</span>;</span><br><span class="line">			<span class="keyword">string</span> $FTM_CloseButton = <span class="string">`button -l &quot;退出&quot;</span></span><br><span class="line"><span class="string">							-c (&quot;deleteUI FTM_MainWindow; select -cl;global string $FTM_MayaWorkSpace; workspace -dir $FTM_MayaWorkSpace;&quot;)`</span>;</span><br><span class="line">		<span class="keyword">formLayout</span> -e</span><br><span class="line">			-ap $FTM_CopyButton right <span class="number">1</span> <span class="number">20</span></span><br><span class="line">			-af $FTM_CopyButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_CopyButton left <span class="number">0</span></span><br><span class="line">			-af $FTM_CopyButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_MoveButton left <span class="number">1</span> <span class="number">20</span></span><br><span class="line">			-ap $FTM_MoveButton right <span class="number">1</span> <span class="number">40</span></span><br><span class="line">			-af $FTM_MoveButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_MoveButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_SetButton left <span class="number">1</span> <span class="number">40</span></span><br><span class="line">			-ap $FTM_SetButton right <span class="number">1</span> <span class="number">60</span></span><br><span class="line">			-af $FTM_SetButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_SetButton bottom <span class="number">0</span></span><br><span class="line">			-af $FTM_ResetButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_ResetButton bottom <span class="number">0</span></span><br><span class="line">			-ap $FTM_ResetButton left <span class="number">1</span> <span class="number">60</span></span><br><span class="line">			-ap $FTM_ResetButton right <span class="number">1</span> <span class="number">80</span></span><br><span class="line">			-ap $FTM_CloseButton left <span class="number">1</span> <span class="number">80</span></span><br><span class="line">			-af $FTM_CloseButton top <span class="number">0</span></span><br><span class="line">			-af $FTM_CloseButton right <span class="number">0</span></span><br><span class="line">			-af $FTM_CloseButton bottom <span class="number">0</span></span><br><span class="line">			$FTM_FunctionForm;</span><br><span class="line">	<span class="keyword">formLayout</span> -e</span><br><span class="line">		-af $FTM_Tabs top <span class="number">0</span></span><br><span class="line">		-af $FTM_Tabs left <span class="number">0</span></span><br><span class="line">		-af $FTM_Tabs right <span class="number">0</span></span><br><span class="line">		-ac $FTM_Tabs bottom <span class="number">3</span> $FTM_FunctionForm</span><br><span class="line">		-af $FTM_FunctionForm left <span class="number">0</span></span><br><span class="line">		-af $FTM_FunctionForm right <span class="number">0</span></span><br><span class="line">		-af $FTM_FunctionForm bottom <span class="number">0</span></span><br><span class="line">		-an $FTM_FunctionForm top</span><br><span class="line">		$FTM_MainForm;</span><br><span class="line"></span><br><span class="line">FTM_EditUIControl $FTM_OptionColumn $FTM_HelpForm;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span> $tabCC = <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_CopyButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_MoveButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 0 &quot;</span> + $FTM_SetButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;if (`tabLayout -q -sti &quot;</span> + $FTM_Tabs + <span class="string">&quot;` == 1) &#123;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_CopyButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_MoveButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;button -e -en 1 &quot;</span> + $FTM_SetButton + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">$tabCC += <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">tabLayout</span> -e -tl $FTM_OptionForm <span class="string">&quot;BasicFunctions&quot;</span> -tl $FTM_ExtraFunctionScroll <span class="string">&quot;ExtraFunctions&quot;</span> -tl $FTM_HelpForm <span class="string">&quot;Help&quot;</span> -psc $tabCC $FTM_Tabs;</span><br><span class="line"><span class="keyword">showWindow</span> FTM_MainWindow;</span><br><span class="line"><span class="comment">//Make sure other windows will be displayed in proper size.</span></span><br><span class="line"><span class="keyword">windowPref</span> -enableAll true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FileTextureManager;</span><br><span class="line"><span class="comment">/////////////////</span></span><br><span class="line"><span class="comment">// SCRIPT Ends //</span></span><br><span class="line"><span class="comment">/////////////////</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/END_02.svg"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://sansuidouer.github.io">三岁豆Er</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://sansuidouer.github.io/57648/">https://sansuidouer.github.io/57648/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://sansuidouer.github.io" target="_blank">SansuidouEr Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Mel/">Mel</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s2.loli.net/2023/07/23/xMPYRhWV5JNFnAU.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2023/07/23/xMPYRhWV5JNFnAU.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2023/07/23/aGLTW4jf8tV316o.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2023/07/23/aGLTW4jf8tV316o.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related  no-desc" href="/56212/" title="你好，欢迎来到我的博客"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s1.ax1x.com/2023/07/23/pCLn0hT.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">你好，欢迎来到我的博客</div></div></div></a><a class="pagination-related  no-desc" href="/19244/" title="灯光管理工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">灯光管理工具</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/56425/" title="UV集检查修复工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/UVSETb.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-21</div><div class="info-item-2">UV集检查修复工具</div></div><div class="info-2"><div class="info-item-1">检查场景中是否有多个UV集和UV集名称不为map1的模型，并提供修复方法</div></div></div></a><a class="pagination-related" href="/4804/" title="Vray 代理设置工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/VrayPorxy.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-03</div><div class="info-item-2">Vray 代理设置工具</div></div><div class="info-2"><div class="info-item-1">Vray代理批量设置脚本（MEL）</div></div></div></a><a class="pagination-related no-desc" href="/11762/" title="Vray阴影层添加移除工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-04</div><div class="info-item-2">Vray阴影层添加移除工具</div></div></div></a><a class="pagination-related" href="/60596/" title="CopyAttrValues"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-05</div><div class="info-item-2">CopyAttrValues</div></div><div class="info-2"><div class="info-item-1">“ 复制属性值 ”</div></div></div></a><a class="pagination-related no-desc" href="/63197/" title="UV传递工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-28</div><div class="info-item-2">UV传递工具</div></div></div></a><a class="pagination-related" href="/37034/" title="小工具：选中场景中被隐藏的组和多边形"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/MEL_Banner_V02.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-11</div><div class="info-item-2">小工具：选中场景中被隐藏的组和多边形</div></div><div class="info-2"><div class="info-item-1">此脚本可以选中场景中被隐藏的模型和组，用于快速找到被隐藏的很深的多边形或组。</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/L_v02.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">三岁豆Er</div><div class="author-info-description">知足不辱，知止不殆</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/SansuidouEr/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/SansuidouEr/" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2898865071@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客<p>如遇问题请通过<a href="/about" style="color:#49b1f5">关于</a>联系我</p><p>因网络而异, 如访问本站较慢</p> <p>请使用科学上网访问本站</p> <br>感谢赞助：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/ZhanZhu01.png" width="100%"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%B4%B4%E5%9B%BE%E8%B7%AF%E5%BE%84%E6%B1%89%E5%8C%96%E7%89%88"><span class="toc-number">1.</span> <span class="toc-text">指定贴图路径汉化版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%89%E5%8C%96%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-number">1.0.1.</span> <span class="toc-text">汉化说明：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%89%E5%8C%96%E7%95%8C%E9%9D%A2"><span class="toc-number">1.0.2.</span> <span class="toc-text">汉化界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%89%E5%8C%96%E7%89%88%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-number">1.0.3.</span> <span class="toc-text">汉化版源码：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">源代码</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/54934/" title="Win10+优化小工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s1.ax1x.com/2023/07/23/pCLKPzD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Win10+优化小工具"/></a><div class="content"><a class="title" href="/54934/" title="Win10+优化小工具">Win10+优化小工具</a><time datetime="2025-01-18T12:51:06.000Z" title="发表于 2025-01-18 20:51:06">2025-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/5054/" title="VsCode的unins000.exe程序尝试在指定目录创建文件拒绝访问"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/VsCode_Banner.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="VsCode的unins000.exe程序尝试在指定目录创建文件拒绝访问"/></a><div class="content"><a class="title" href="/5054/" title="VsCode的unins000.exe程序尝试在指定目录创建文件拒绝访问">VsCode的unins000.exe程序尝试在指定目录创建文件拒绝访问</a><time datetime="2025-01-18T12:51:06.000Z" title="发表于 2025-01-18 20:51:06">2025-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/6076/" title="Notion"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/Notion_Banner.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Notion"/></a><div class="content"><a class="title" href="/6076/" title="Notion">Notion</a><time datetime="2025-01-01T09:32:59.000Z" title="发表于 2025-01-01 17:32:59">2025-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/32112/" title="你的电脑C盘都有些啥？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/Windows_C.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="你的电脑C盘都有些啥？"/></a><div class="content"><a class="title" href="/32112/" title="你的电脑C盘都有些啥？">你的电脑C盘都有些啥？</a><time datetime="2024-12-30T13:08:38.000Z" title="发表于 2024-12-30 21:08:38">2024-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/58783/" title="袋熊"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/SansuidouEr/images@main/img/Wombat_B.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="袋熊"/></a><div class="content"><a class="title" href="/58783/" title="袋熊">袋熊</a><time datetime="2024-11-17T08:37:46.000Z" title="发表于 2024-11-17 16:37:46">2024-11-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By 三岁豆Er</div><div class="footer_custom_text">欢迎来到我的博客！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>